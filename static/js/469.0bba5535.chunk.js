"use strict";(self.webpackChunkimonitor=self.webpackChunkimonitor||[]).push([[469],{18469:function(e,t,a){a.r(t);var n=a(93433),r=a(74165),s=a(15861),o=a(29439),i=a(57689),c=a(72791),l=a(43621),u=a(89649),d=a(75985),m=(a(5462),a(48273)),p=a(80184);t.default=function(){var e=(0,i.UO)().id,t=(0,i.s0)(),a=(0,c.useState)([]),x=(0,o.Z)(a,2),f=x[0],g=x[1],h=(0,c.useState)([]),b=(0,o.Z)(h,2),v=b[0],y=b[1],S=(0,c.useState)(""),w=(0,o.Z)(S,2),N=w[0],C=w[1],j=(0,c.useState)(""),k=(0,o.Z)(j,2),Z=k[0],T=k[1],O=(0,c.useState)(""),A=(0,o.Z)(O,2),E=A[0],B=A[1],I=(0,c.useState)(""),P=(0,o.Z)(I,2),M=P[0],q=P[1],H=(0,c.useState)(""),R=(0,o.Z)(H,2),D=R[0],L=R[1],F=(0,c.useState)(""),J=(0,o.Z)(F,2),U=J[0],G=J[1],W=(0,c.useState)(""),Y=(0,o.Z)(W,2),V=Y[0],_=Y[1],K=(0,c.useState)(""),$=(0,o.Z)(K,2),z=$[0],Q=$[1],X=(0,c.useState)(""),ee=(0,o.Z)(X,2),te=ee[0],ae=ee[1],ne=(0,c.useState)(""),re=(0,o.Z)(ne,2),se=re[0],oe=re[1],ie=(0,c.useState)(""),ce=(0,o.Z)(ie,2),le=ce[0],ue=ce[1],de=(0,c.useState)(""),me=(0,o.Z)(de,2),pe=me[0],xe=me[1],fe=(0,c.useState)(""),ge=(0,o.Z)(fe,2),he=ge[0],be=ge[1],ve=(0,c.useState)(""),ye=(0,o.Z)(ve,2),Se=ye[0],we=ye[1],Ne=(0,c.useState)(""),Ce=(0,o.Z)(Ne,2),je=Ce[0],ke=Ce[1],Ze=(0,c.useState)(""),Te=(0,o.Z)(Ze,2),Oe=Te[0],Ae=Te[1],Ee=(0,c.useState)(""),Be=(0,o.Z)(Ee,2),Ie=Be[0],Pe=Be[1],Me=(0,c.useState)(""),qe=(0,o.Z)(Me,2),He=qe[0],Re=qe[1],De=(0,c.useState)(""),Le=(0,o.Z)(De,2),Fe=Le[0],Je=Le[1],Ue=(0,c.useState)(""),Ge=(0,o.Z)(Ue,2),We=Ge[0],Ye=Ge[1],Ve=(0,c.useState)(""),_e=(0,o.Z)(Ve,2),Ke=_e[0],$e=_e[1],ze=(0,c.useState)(!0),Qe=(0,o.Z)(ze,2),Xe=Qe[0],et=Qe[1],tt=(0,c.useState)(!1),at=(0,o.Z)(tt,2),nt=at[0],rt=at[1],st=(0,c.useState)(0),ot=(0,o.Z)(st,2),it=ot[0],ct=ot[1],lt=(0,c.useState)([]),ut=(0,o.Z)(lt,2),dt=ut[0],mt=ut[1],pt=(0,c.useState)([]),xt=(0,o.Z)(pt,2),ft=xt[0],gt=xt[1];(0,c.useEffect)((function(){bt(),ht(),l.Z.channel("custom-all-channel").on("postgres_changes",{event:"*",schema:"public",table:"BeneAccount"},(function(e){ht()})).on("postgres_changes",{event:"*",schema:"public",table:"StudentInformation"},(function(e){ht()})).subscribe()}),[e]);var ht=function(){var a=(0,s.Z)((0,r.Z)().mark((function a(){var n,s,o,i,c,u,d;return(0,r.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,l.Z.from("StudentInformation").select().eq("id",e).single();case 2:if(n=a.sent,s=n.data,o=n.error,!s){a.next=35;break}return null===s.studremarks&&ae("No Remarks"),C(s.studname),B(s.studname),q(s.studprogram),Q(s.studsection),G(s.ojtstart),_(s.ojtend),L(s.studemail),ue(s.studmaxprogress),oe(s.studprogress),ae(s.studremarks),Ye(s.companyname),T(s.companyname),we(s.companyaddress),ke(s.supervisorname),Ae(s.supervisorcontactnumber),Pe(s.supervisorofficenumber),Re(s.companydesignation),Je(s.companyemail),mt(s.prevComp),g(s),gt({companyname:s.companyname,companyaddress:s.companyaddress,supervisorname:s.supervisorname,supervisorcontactnumber:s.supervisorcontactnumber,supervisorofficenumber:s.supervisorofficenumber,companydesignation:s.companydesignation,companyemail:s.companyemail}),a.next=30,l.Z.from("CompanyTable").select().eq("companyname",s.companyname);case 30:i=a.sent,c=i.data,xe(c[0].startingtime),be(c[0].endingtime),ct(c[0].companyOJT);case 35:return o&&t("/"),a.next=38,l.Z.from("BeneAccount").select();case 38:u=a.sent,d=u.data,y(d);case 41:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),bt=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.from("CompanyTable").select();case 2:t=e.sent,(a=t.data)&&$e(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var vt=function(){var t=(0,s.Z)((0,r.Z)().mark((function t(a){var n,s,o,i,c,u,m;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),E&&M&&D&&U&&V&&z&&We&&Se&&je&&Oe&&Ie&&He&&Fe){t.next=4;break}return d.Am.warn("Fill all the input",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),t.abrupt("return");case 4:if(/\S+@stamaria\.sti\.edu\.ph$/.test(D)){t.next=7;break}return d.Am.warning("Invalid Email",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),t.abrupt("return");case 7:n=0;case 8:if(!(n<f.length)){t.next=15;break}if(f[n].studemail!==D){t.next=12;break}return d.Am.warn("The email is already registered",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,limit:1,theme:"light"}),t.abrupt("return");case 12:n++,t.next=8;break;case 15:s=0;case 16:if(!(s<v.length)){t.next=23;break}if(v[s].beneEmail!==D){t.next=20;break}return d.Am.warn("The email is already registered",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,limit:1,theme:"light"}),t.abrupt("return");case 20:s++,t.next=16;break;case 23:if(!(se>le)){t.next=26;break}return d.Am.warn("Invalid Progress",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),t.abrupt("return");case 26:if(N===E){t.next=39;break}return t.next=29,l.Z.from("Messaging").update({name:E}).eq("name",N).select();case 29:return o=t.sent,o.data,t.next=33,l.Z.from("Messaging").update({contactwith:E}).eq("contactwith",N).select();case 33:return i=t.sent,i.data,t.next=37,l.Z.from("ActivityLog").update({name:E}).eq("name",N).select();case 37:c=t.sent,c.data;case 39:return u=0,m=0,"(BSIT)Bachelor of Science in Information Technology"===M&&(m=486,u="BSIT"),"(BSAIS)Bachelor of Science in Accounting Information Systems"===M&&(m=600,u="BSAIS"),"(BSHM)Bachelor of Science in Hospitality Management"===M&&(m=600,u="BSHM"),"(BSTM)Bachelor of Science in Tourism Management"===M&&(m=600,u="BSTM"),"(BSCPE)Bachelor of Science in Computer Engineering"===M&&(m=486,u="BSCPE"),"(BSCS)Bachelor of Science in Computer Science"===M&&(m=300,u="BSCS"),t.next=49,l.Z.from("StudentInformation").update({studname:E,studemail:D,ojtstart:U,ojtend:V,studprogram:M,studsection:z,studprogress:se,studmaxprogress:m,studremarks:te,studcourse:u,companyname:We,companyaddress:Se,supervisorname:je,supervisorcontactnumber:Oe,supervisorofficenumber:Ie,companydesignation:He,companyemail:Fe}).eq("id",e);case 49:yt();case 50:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function yt(){return St.apply(this,arguments)}function St(){return(St=(0,s.Z)((0,r.Z)().mark((function e(){var t,a,n,s,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.from("CompanyTable").select();case 2:if(t=e.sent,a=t.data,Z!==We){e.next=8;break}jt(),e.next=34;break;case 8:o=0;case 9:if(!(o<a.length)){e.next=24;break}if(a[o].companyname!==We){e.next=21;break}return n=parseInt(a[o].companyOJT)+1,e.next=14,l.Z.from("CompanyTable").update({companyOJT:n}).eq("id",a[o].id);case 14:return s=parseInt(it)-1,console.log(Z),e.next=18,l.Z.from("CompanyTable").update({companyOJT:s}).eq("companyname",Z);case 18:return wt(),jt(),e.abrupt("return");case 21:o++,e.next=9;break;case 24:if(Z===We){e.next=33;break}return e.next=27,l.Z.from("CompanyTable").insert({startingtime:pe,endingtime:he,companyname:We,companyaddress:Se,supervisorname:je,supervisorcontactnumber:Oe,supervisorofficenumber:Ie,companydesignation:He,companyemail:Fe,companyOJT:1});case 27:return s=parseInt(it)-1,e.next=30,l.Z.from("CompanyTable").update({companyOJT:s}).eq("companyname",Z);case 30:return wt(),jt(),e.abrupt("return");case 33:return e.abrupt("return",(0,p.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 backdrop-blur-sm flex justify-center items-center",children:"afasdf"}));case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wt(){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,s.Z)((0,r.Z)().mark((function t(){var a,s,o,i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s={companyname:ft.companyname,companyaddress:ft.companyaddress,supervisorname:ft.supervisorname,supervisorcontactnumber:ft.supervisorcontactnumber,supervisorofficenumber:ft.supervisorofficenumber,companydesignation:ft.companydesignation,companyemail:ft.companyemail,dateLeft:new Date},o=(a=o=[]).concat.apply(a,(0,n.Z)(dt).concat([s])),!(dt.length<=0)){t.next=9;break}return t.next=6,l.Z.from("StudentInformation").update({prevComp:o}).eq("id",e);case 6:return t.abrupt("return");case 9:i=0;case 10:if(!(i<dt.length)){t.next=18;break}if(dt[i].companyname===Z){t.next=15;break}return t.next=14,l.Z.from("StudentInformation").update({prevComp:o}).eq("id",e);case 14:return t.abrupt("return");case 15:i++,t.next=10;break;case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Ct=(0,c.useRef)();function jt(){d.Am.success("Account of ".concat(E," is Updated!"),{position:"top-center",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"light"}),t("/")}(0,c.useEffect)((function(){var e=function(e){Ct.current.contains(e.target)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}));return(0,p.jsxs)("div",{className:"overflow-hidden",children:[f?(0,p.jsxs)("div",{className:"pt-8 md:p-5 p-1 text-white overflow-hidden h-screen","data-aos":"fade-down","data-aos-duration":"1000",children:[(0,p.jsx)("a",{className:"font-bold md:text-4xl text-3xl mb-8",children:"EDIT STUDENT INFORMATION"}),(0,p.jsxs)("form",{onSubmit:vt,className:"grid  w-[100%] bg-black bg-opacity-[1%] p-1 overflow-y-auto overflow-x-hidden  md:h-[80%] h-[70%] ",children:[(0,p.jsxs)("div",{className:"w-[100%] md:flex grid  gap-1 h-fit",children:[(0,p.jsx)("label",{className:"font-semibold text-[20px] md:w-[10%] w-[100%]",children:"FULL NAME:"}),(0,p.jsx)("div",{className:" md:flex flex-grow grid gap-y-5 gap-2 w-fill",children:(0,p.jsx)("input",{required:!0,type:"text",className:"rounded-md p-1 w-[100%] 0 text-black",placeholder:"First Name",id:"studfname",value:E,onChange:function(e){return B(e.target.value)}})})]}),(0,p.jsxs)("div",{className:"grid md:flex grid-cols-1  gap-4 pt-4 w-[100%]",children:[(0,p.jsx)("label",{className:"font-semibold text-[19px]",children:"PROGRAM"}),(0,p.jsx)("div",{className:"w-[100%]",ref:Ct,children:(0,p.jsx)("select",{value:M,className:"w-full text-black rounded-md pl-2 text-justify p-1",onChange:function(e){return q(e.target.value)},children:u.map((function(e,t){return n=t,(a=e).Hours<se?(0,p.jsx)("option",{disabled:!0,className:"pt-4 text-black",children:a.Program},n):(0,p.jsx)("option",{className:"pt-4 text-black",children:a.Program},n);var a,n}))})}),(0,p.jsx)("label",{className:"font-semibold text-[19px]",children:"SECTION"}),(0,p.jsx)("input",{required:!0,value:z,onChange:function(e){return Q(e.target.value)},type:"text",placeholder:"Enter Section",className:"rounded-md w-[100%] text-black pl-2"})]}),(0,p.jsxs)("div",{className:"grid md:flex grid-cols-1  gap-4 pt-4 w-[100%]",children:[(0,p.jsx)("label",{className:"font-semibold text-[19px] w-[26%]",children:"OJT STARTING"}),(0,p.jsx)("input",{required:!0,value:U,type:"date",className:"rounded-md md:w-[100%] min-w-[405px] h-[32px] text-black pl-2",onChange:function(e){return G(e.target.value)}}),(0,p.jsx)("label",{className:"font-semibold text-[19px] w-[20%]",children:"OJT END"}),(0,p.jsx)("input",{required:!0,value:V,type:"date",className:"rounded-md md:w-[100%] min-w-[405px] text-black pl-2",onChange:function(e){return _(e.target.value)}})]}),(0,p.jsxs)("div",{className:"grid md:flex grid-cols-1 w-[100%]  gap-4 pt-4",children:[(0,p.jsx)("label",{className:"font-semibold text-[19px] w-[5%]",children:"O365"}),(0,p.jsx)("input",{required:!0,type:"email",className:"rounded-md p-1 md:w-[65%] w-[100%]  text-black",value:D,onChange:function(e){return L(e.target.value)},placeholder:"example123456@stamaria.sti.edu.ph"}),(0,p.jsx)("label",{className:"font-semibold text-[19px] w-[16%]",children:"STUDENT PROGRESS"}),(0,p.jsx)("input",{required:!0,type:"number",className:"rounded-md p-1 md:w-[12%] w-[100%]  text-black",value:se,onChange:function(e){return oe(e.target.value)},placeholder:"Hours"})]}),(0,p.jsxs)("div",{className:"grid md:flex grid-cols-1  gap-4 pt-4 mb-10",children:[(0,p.jsx)("label",{className:"font-semibold text-[19px] w-[6%]",children:"REMARKS"}),(0,p.jsx)("textarea",{rows:"4",className:"p-1 w-[100%] text-sm text-gray-900  rounded-md",placeholder:"Write Remaks Here..",value:te,onChange:function(e){return ae(e.target.value)}})]}),(0,p.jsx)("label",{className:"font-semibold text-[25px]  ",children:"COMPANY INFORMATION"}),(0,p.jsxs)("div",{className:"flex  gap-5 pt-2",children:[(0,p.jsxs)("label",{className:"gap-3 flex font-semibold text-[19px] ",children:["START TIME",(0,p.jsx)("input",{disabled:Xe,value:pe,onChange:function(e){return xe(e.target.value)},required:!0,type:"time",className:"rounded-md text-black pl-1 h-[30px] "})]}),(0,p.jsxs)("label",{className:"gap-3 flex font-semibold text-[19px]",children:["END TIME",(0,p.jsx)("input",{disabled:Xe,value:he,onChange:function(e){return be(e.target.value)},required:!0,type:"time",className:"rounded-md text-black pl-1 h-[30px] "})]})]}),(0,p.jsxs)("div",{className:"grid md:flex grid-cols-1 w-[100%]  gap-4 pt-4",children:[(0,p.jsx)("label",{className:"font-semibold text-[19px] md:w-[15%] w-[100%]",children:"COMPANY NAME"}),(0,p.jsxs)("div",{className:"grid w-[100%] h-fit text-black",children:[(0,p.jsx)("input",{required:!0,value:We,onChange:function(e){Ye(e.target.value),rt(!0);for(var t=0;t<Ke.length;t++)Ke[t].companyname!==We?et(!1):et(Z!==We)},type:"text",placeholder:"Enter Company Name",className:"rounded-md w-[100%] h-[32px] md:h-7 text-black pl-2"}),Ke&&nt&&(0,p.jsx)("div",{className:"overflow-auto w-[100%] max-h-24 rounded-md ",children:Ke.filter((function(e){var t=We.toLowerCase(),a=e.companyname.toLowerCase();return t&&a.includes(t)&&a!==t})).map((function(e){return(0,p.jsx)("div",{className:" w-[100%] p-1 bg-slate-200 ",children:(0,p.jsx)("p",{onClick:function(){return t=e.companyname,void Ye(t)||we(e.companyaddress)||ke(e.supervisorname)||Ae(e.supervisorcontactnumber)||Pe(e.supervisorofficenumber)||Re(e.companydesignation)||Je(e.companyemail)||xe(e.startingtime)||be(e.endingtime)||rt(!1)||et(!0);var t},className:"hover:bg-blue-400  rounded-md w-[100%]",children:e.companyname})},e.id)}))})]})]}),(0,p.jsxs)("div",{className:"grid md:flex grid-cols-1 w-[100%] gap-4 pt-4",children:[(0,p.jsx)("label",{className:"font-semibold text-[19px] w-[100%] md:w-[17%]",children:"COMPANY ADDRESS"}),(0,p.jsx)("input",{required:!0,value:Se,onChange:function(e){return we(e.target.value)},type:"text",placeholder:"Enter Company Address",className:"rounded-md w-[100%] h-[32px] md:h-7 text-black pl-2"})]}),(0,p.jsxs)("div",{className:"grid md:flex grid-cols-1 w-[100%] gap-4 pt-4",children:[(0,p.jsx)("label",{className:"font-semibold text-[19px] w-[39%] ",children:"SUPERVISOR NAME"}),(0,p.jsx)("input",{required:!0,value:je,onChange:function(e){return ke(e.target.value)},type:"text",placeholder:"Enter Supervisor Name",className:"rounded-md w-[100%] h-[32px]  text-black pl-2"}),(0,p.jsx)("label",{className:"font-semibold text-[19px] w-[15%]",children:"DESIGNATION"}),(0,p.jsx)("input",{required:!0,value:He,onChange:function(e){return Re(e.target.value)},type:"text",placeholder:"Enter Designation",className:"rounded-md w-[100%] text-black pl-2 h-[32px]"})]}),(0,p.jsxs)("div",{className:"grid md:flex grid-cols-1 w-[100%] gap-4 pt-4 mb-3",children:[(0,p.jsx)("label",{className:"font-semibold text-[19px]  w-[55%]",children:"SUPERVISOR CONTACT #"}),(0,p.jsx)("input",{required:!0,value:Oe,onChange:function(e){return Ae(e.target.value)},type:"text",placeholder:"Enter Supervisor Contact #",className:"rounded-md w-[100%] h-[32px] text-black pl-2"}),(0,p.jsx)("label",{className:"font-semibold text-[19px]  w-[100%] md:w-[30%] mb-3 ",children:"OFFICE EMAIL"}),(0,p.jsx)("input",{required:!0,value:Fe,onChange:function(e){return Je(e.target.value)},type:"text",placeholder:"Enter Office Email",className:"rounded-md w-[100%]  h-[32px] text-black pl-2"})]}),(0,p.jsxs)("div",{className:"w-[100%] md:flex grid",children:[(0,p.jsx)("label",{className:"font-semibold text-[19px] w-[15%]",children:"OFFICE NUMBER"}),(0,p.jsx)("input",{required:!0,value:Ie,onChange:function(e){return Pe(e.target.value)},type:"text",placeholder:"Enter Office Number",className:"rounded-md w-[100%] text-black pl-2 h-[32px]"})]}),(0,p.jsx)("button",{className:" bg-[#145DA0] w-[99.9%] h-[40px] rounded-md font-bold hover:bg-blue-400 mb-[10%] mt-2",children:"UPDATE"})]})]}):(0,p.jsx)("div",{className:"flex items-center justify-center place-content-center mt-[20%]",children:(0,p.jsx)(m.iT,{height:80,width:80,color:"#145DA0",wrapperStyle:{},wrapperClass:"",visible:!0,ariaLabel:"oval-loading",secondaryColor:"#fffff",strokeWidth:2,strokeWidthSecondary:2})}),(0,p.jsx)(d.Ix,{position:"top-right",autoClose:1e3,limit:1,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})}},89649:function(e){e.exports=JSON.parse('[{"id":1,"Program":"","Acro":""},{"id":2,"Program":"(BSIT)Bachelor of Science in Information Technology","Hours":486,"Acro":"BT"},{"id":3,"Program":"(BSAIS)Bachelor of Science in Accounting Information Systems","Hours":600,"Acro":"AIS"},{"id":4,"Program":"(BSHM)Bachelor of Science in Hospitality Management","Hours":600,"Acro":"HM"},{"id":5,"Program":"(BSTM)Bachelor of Science in Tourism Management","Hours":600,"Acro":"TM"},{"id":6,"Program":"(BSCPE)Bachelor of Science in Computer Engineering","Hours":486,"Acro":"CPE"},{"id":7,"Program":"(BSCS)Bachelor of Science in Computer Science","Hours":300,"Acro":"CS"}]')}}]);
//# sourceMappingURL=469.0bba5535.chunk.js.map