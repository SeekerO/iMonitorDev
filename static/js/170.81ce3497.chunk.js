"use strict";(self.webpackChunkimonitor=self.webpackChunkimonitor||[]).push([[170],{94170:function(e,t,s){s.r(t);var n=s(74165),r=s(15861),a=s(29439),i=s(72791),o=s(43621),l=s(75985),c=(s(5462),s(56290)),d=s(26249),u=s(1640),m=s(80184);t.default=function(){var e=(0,i.useState)(),t=(0,a.Z)(e,2),s=t[0],p=t[1],x=(0,i.useState)(),h=(0,a.Z)(x,2),b=h[0],f=h[1],g=(0,i.useState)(""),v=(0,a.Z)(g,2),j=v[0],N=v[1],S=(0,i.useState)(""),A=(0,a.Z)(S,2),w=A[0],C=A[1],k=(0,i.useState)(""),y=(0,a.Z)(k,2),Z=(y[0],y[1]),E=(0,i.useState)("ALUMNI OFFICER"),B=(0,a.Z)(E,2),I=B[0],O=B[1],T=(0,i.useState)("ALL"),P=(0,a.Z)(T,2),H=P[0],M=P[1],L=(0,i.useState)(!1),R=(0,a.Z)(L,2),U=R[0],F=R[1],V=(0,i.useState)(!1),D=(0,a.Z)(V,2),q=D[0],z=D[1],W=(0,i.useState)(!1),$=(0,a.Z)(W,2),_=$[0],G=$[1];(0,i.useEffect)((function(){J();o.Z.channel("custom-all-channel").on("postgres_changes",{event:"*",schema:"public",table:"BeneAccount"},(function(e){J()})).subscribe()}),[]);var J=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,s,r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.from("BeneAccount").select();case 2:return t=e.sent,(s=t.data)&&f(s),e.next=7,o.Z.from("StudentInformation").select();case 7:r=e.sent,(a=r.data)&&p(a);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=!1;function Q(){return(Q=(0,r.Z)((0,n.Z)().mark((function e(){var t,r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j&&w&&I&&H){e.next=3;break}return Z("Please input all fields"),e.abrupt("return");case 3:if(/\S+@stamaria\.sti\.edu\.ph$/.test(w)?K=!0:(K=!1,l.Am.warning("Invalid Email",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})),!K){e.next=36;break}t=0;case 6:if(!(t<s.length)){e.next=13;break}if(s[t].studemail!==w){e.next=10;break}return l.Am.warn(" The email is already registed in Student Accounts",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,limit:1,theme:"light"}),e.abrupt("return");case 10:t++,e.next=6;break;case 13:r=0;case 14:if(!(r<b.length)){e.next=21;break}if(b[r].beneEmail!==w&&b[r].beneName!==j){e.next=18;break}return l.Am.warn(" The email is already registed in APO & ADVISER Accounts",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,limit:1,theme:"light"}),e.abrupt("return");case 18:r++,e.next=14;break;case 21:if(G(!0),"ALUMNI OFFICER"===I&&(a="ALL"),!a){e.next=28;break}return e.next=26,o.Z.from("BeneAccount").insert([{beneName:j,beneEmail:w,status:"active",position:I,filterby:a}]).single();case 26:e.next=30;break;case 28:return e.next=30,o.Z.from("BeneAccount").insert([{beneName:j,beneEmail:w,status:"active",position:I,filterby:H}]).single();case 30:z(!1),N(""),C(""),Z(""),G(!1),l.Am.success("Account Created Successfully!",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"});case 36:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"h-screen overflow-y-auto md:pt-0 pt-10",children:(0,m.jsx)("div",{className:" md:grid-cols-3 grid-cols-1 gap-5 gap-y-50  md:ml-[2.5%] ml-0 md:mr-[2.5%] mr-0 mt-[10%] place-content-center flex",children:(0,m.jsxs)("div",{className:"bg-white w-[400px] h-[390px] rounded-md shadow-2xl shadow-slate-900 ",children:[(0,m.jsx)("p",{className:"text-center font-bold text-[30px] bg-green-700 rounded-t-sm font-mono  text-white",children:"CREATE ACCOUNT"}),q?(0,m.jsx)("div",{className:"",children:(0,m.jsx)(d.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:!0,children:(0,m.jsx)(u.Z,{color:"inherit"})})}):(0,m.jsxs)("div",{children:[(0,m.jsxs)("form",{className:"mt-[5.8%]",children:[(0,m.jsx)("p",{className:"ml-5 font-semibold mt-4",children:"NAME"}),(0,m.jsx)("input",{type:"text",required:!0,value:j,placeholder:"Type Name Here",onChange:function(e){return N(e.target.value)},className:"bg-gray-200 w-[90%] ml-5 mb-2 pl-2 p-2 rounded-sm"}),(0,m.jsx)("p",{className:"ml-5 font-semibold mt-4",children:"EMAIL"}),(0,m.jsx)("input",{type:"email",required:!0,value:w,placeholder:"Type Email Here",onChange:function(e){return C(e.target.value)},className:"bg-gray-200 w-[90%] ml-5 mb-2 pl-2 p-2 rounded-sm"}),j&&(0,m.jsxs)("div",{className:"flex",children:[(0,m.jsxs)("select",{value:I,className:"ml-5 mb-2 border-2 border-slate-400",onChange:function(e){return O(e.target.value)},children:[(0,m.jsx)("option",{children:"ALUMNI OFFICER"}),(0,m.jsx)("option",{children:"ADVISER "})]}),"ADVISER"===I&&(0,m.jsxs)("select",{value:H,className:"ml-5 mb-2 border-2 border-slate-400",onChange:function(e){return M(e.target.value)},children:[(0,m.jsx)("option",{value:"BSIT",children:"BSIT"}),(0,m.jsx)("option",{value:"BSAIS",children:"BSAIS"}),(0,m.jsx)("option",{value:"BSTM",children:"BSTM"}),(0,m.jsx)("option",{value:"BSHM",children:"BSHM"}),(0,m.jsx)("option",{value:"BSCS",children:"BSCS"}),(0,m.jsx)("option",{value:"BSCPE",children:"BSCPE"})]})]}),(0,m.jsx)("button",{disabled:_,onClick:function(){return function(){return Q.apply(this,arguments)}()},className:"".concat(_?"bg-gray-500":"bg-[#12557c] hover:bg-[#1b7fb9]","  text-white font-bold w-[90%] p-2 ml-5 "),children:"CREATE"})]}),(0,m.jsx)("button",{onClick:function(){return F(!U)},className:" text-blue-500 hover:underline cursor-pointer flex justify-start ml-5",children:"View Accounts"})]})]})})}),(0,m.jsx)(c.Z,{visible:U,setViewAccounts:F,beneinfo:b,studinfo:s})]})}},56290:function(e,t,s){s.d(t,{Z:function(){return b}});var n=s(72791),r=s(29439),a=s(56355),i=s(16856),o=s(74165),l=s(15861),c=s(43621),d=s(84373),u=s(75985),m=s(80184);var p=function(e){var t=e.visible,s=e.close,a=e.data,i=e.beneinfo,p=e.studinfo,x=(0,n.useState)(a.beneName),h=(0,r.Z)(x,2),b=h[0],f=(h[1],(0,n.useState)(a.beneName)),g=(0,r.Z)(f,2),v=g[0],j=g[1],N=(0,n.useState)(a.beneEmail),S=(0,r.Z)(N,2),A=S[0],w=S[1],C=(0,n.useState)(a.id),k=(0,r.Z)(C,2),y=k[0],Z=(k[1],(0,n.useState)("")),E=(0,r.Z)(Z,2),B=E[0],I=E[1],O=(0,n.useState)("ALUMNI OFFICER"),T=(0,r.Z)(O,2),P=(T[0],T[1],(0,n.useState)("ALL")),H=(0,r.Z)(P,2),M=(H[0],H[1],(0,n.useState)(a.position)),L=(0,r.Z)(M,2),R=L[0],U=L[1],F=(0,n.useState)("BSIT"),V=(0,r.Z)(F,2),D=V[0],q=V[1],z=(0,n.useState)(!1),W=(0,r.Z)(z,2),$=W[0],_=W[1];function G(){return(G=(0,l.Z)((0,o.Z)().mark((function e(){var t,s,n,r,l,d,m,x;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==v&&""!==A){e.next=3;break}return I("Please input all fields"),e.abrupt("return");case 3:if(t=!1,/\S+@\S+\.\S+/.test(A)?t=!0:(t=!1,u.Am.warning("Invalid Email",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})),!1,s=a.beneEmail,!t){e.next=56;break}if(s===A){e.next=25;break}n=0;case 10:if(!(n<p.length)){e.next=17;break}if(p[n].studemail!==A){e.next=14;break}return u.Am.warn(" The email is already registed in Student Accounts",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,limit:1,theme:"light"}),e.abrupt("return");case 14:n++,e.next=10;break;case 17:r=0;case 18:if(!(r<i.length)){e.next=25;break}if(i[r].beneEmail!==A){e.next=22;break}return u.Am.warn(" The email is already registed in APO & ADVISER Accounts",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,limit:1,theme:"light"}),e.abrupt("return");case 22:r++,e.next=18;break;case 25:if(!0!==!0){e.next=55;break}if(_(!0),b===v){e.next=37;break}return e.next=31,c.Z.from("Messaging").update({name:v}).eq("name",b);case 31:return l=e.sent,l.data,e.next=35,c.Z.from("Messaging").update({contactwith:v}).eq("contactwith",b);case 35:d=e.sent,d.data;case 37:if("ADVISER"===R){e.next=45;break}return"ALL",e.next=41,c.Z.from("BeneAccount").update({beneName:v,beneEmail:A,filterby:"ALL",position:R}).eq("id",y);case 41:m=e.sent,m.data,e.next=49;break;case 45:return e.next=47,c.Z.from("BeneAccount").update({beneName:v,beneEmail:A,filterby:D,position:R}).eq("id",y);case 47:x=e.sent,x.data;case 49:I(),u.Am.success("Account Updated Successfully!",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),_(!1),J(),e.next=56;break;case 55:u.Am.warning("Account Not Detected",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"});case 56:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){s(!t)}return t?(0,m.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-20 backdrop-blur-sm flex justify-center items-center p-4 ",children:(0,m.jsx)("div",{className:"bg-white rounded-md shadow-lg shadow-slate-600 w-[500px]","data-aos":"zoom-in","data-aos-duration":"500",children:(0,m.jsxs)("div",{className:"bg-white md:h-[270px] h-[320px] w-[100%] rounded-md  ",children:[(0,m.jsxs)("div",{className:"flex md:text-center text-start font-bold text-[30px] bg-amber-700 rounded-t-sm font-mono text-white ",children:[(0,m.jsx)("a",{onClick:function(){return J()},className:"justify-start ml-2 md:mr-[110px] mr-[10px] flex items-center cursor-pointer",children:(0,m.jsx)(d.u1R,{})}),(0,m.jsx)("p",{className:"flex ",children:" UPDATE ACCOUNT"})]}),(0,m.jsxs)("div",{className:"",children:[(0,m.jsxs)("div",{className:"md:flex grid items-center gap-1 mt-4 justify-center w-[100%]",children:[(0,m.jsx)("p",{className:"ml-1 font-semibold",children:"NAME"})," ",(0,m.jsx)("input",{type:"text",value:v,onChange:function(e){return j(e.target.value)},placeholder:"Update name here",className:"bg-gray-200 md:w-[80%] w-[280px] pl-2 p-1 rounded-sm"})]}),(0,m.jsxs)("div",{className:"md:flex grid items-center gap-1 mt-4 justify-center",children:[(0,m.jsx)("p",{className:"ml-1 font-semibold ",children:"EMAIL"}),(0,m.jsx)("input",{type:"text",value:A,onChange:function(e){return w(e.target.value)},placeholder:"Update email here",className:"bg-gray-200 md:w-[80%] w-[280px]  pl-2 p-1 rounded-sm"})]}),(0,m.jsxs)("div",{className:"flex mb-4 mt-2",children:[(0,m.jsxs)("select",{className:"ml-6 mb-2 border-2 border-slate-400",value:R,onChange:function(e){return U(e.target.value)},children:[(0,m.jsx)("option",{children:"ALUMNI OFFICER"}),(0,m.jsx)("option",{children:"ADVISER "})]}),"ADVISER"===R&&(0,m.jsxs)("select",{className:"ml-5 mb-2 border-2 border-slate-400",value:D,onChange:function(e){return q(e.target.value)},children:[(0,m.jsx)("option",{value:"BSIT",children:"BSIT"}),(0,m.jsx)("option",{value:"BSAIS",children:"BSAIS"}),(0,m.jsx)("option",{value:"BSTM",children:"BSTM"}),(0,m.jsx)("option",{value:"BSHM",children:"BSHM"}),(0,m.jsx)("option",{value:"BSCS",children:"BSCS"}),(0,m.jsx)("option",{value:"BSCPE",children:"BSCPE"})]})]}),B&&(0,m.jsx)("p",{className:"ml-[20px] text-red-600",children:B}),(0,m.jsx)("button",{onClick:function(){return function(){return G.apply(this,arguments)}()},disabled:$,className:"".concat($?"bg-gray-500":"bg-[#12557c] hover:bg-[#1b7fb9]","  text-white font-bold w-[90%] p-2 "),children:"UPDATE"})]})]})})}):null};var x=function(e){var t=e.visible,s=e.close,a=e.data,i=(0,n.useState)(),p=(0,r.Z)(i,2),x=p[0],h=p[1],b=(0,n.useState)(a.id),f=(0,r.Z)(b,2),g=(f[0],f[1],(0,n.useState)(a.beneName)),v=(0,r.Z)(g,2),j=v[0],N=v[1],S=(0,n.useState)(a.status),A=(0,r.Z)(S,2),w=A[0],C=A[1],k=(0,n.useState)(""),y=(0,r.Z)(k,2),Z=y[0],E=y[1],B=(0,n.useState)(!1),I=(0,r.Z)(B,2),O=I[0],T=I[1];function P(){return(P=(0,l.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=3;break}return E("Please input the name or search for it"),e.abrupt("return");case 3:return null===x&&h(w),!0,T(!0),e.next=9,c.Z.from("BeneAccount").update({status:w}).eq("beneName",j);case 9:t=e.sent,t.data,u.Am.success("Account Archive Successfully!",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),T(!1),s(),e.next=17;break;case 16:u.Am.warning("Account Archive Not Successful!",{position:"top-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,n.useEffect)((function(){h(w)}),[a]),t?(0,m.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-20 backdrop-blur-sm flex justify-center items-center p-4 ",children:(0,m.jsx)("div",{className:"w-[500px]","data-aos":"zoom-in","data-aos-duration":"500",children:(0,m.jsxs)("div",{className:"bg-white w-[100%] md:h-[270px] h-[320px]  rounded-md shadow-lg shadow-slate-600",children:[(0,m.jsxs)("div",{className:"flex md:text-center text-start font-bold text-[30px] bg-blue-900 rounded-t-sm font-mono text-white",children:[(0,m.jsx)("a",{onClick:function(){return s()},className:"justify-start ml-2 md:mr-[110px] mr-[10px] flex items-center cursor-pointer",children:(0,m.jsx)(d.u1R,{})}),(0,m.jsx)("p",{className:"flex ",children:" ARCHIVE ACCOUNT"})]}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("p",{className:" font-semibold mt-4",children:["NAME",(0,m.jsx)("input",{type:"text",value:j,onChange:function(e){return N(e.target.value)},placeholder:"Update name here",className:"bg-gray-200 md:w-[80%] w-[280px] ml-5 mb-2 pl-2 p-1 rounded-sm"})]}),(0,m.jsxs)("p",{className:" font-semibold mt-7",children:["STATUS",(0,m.jsxs)("select",{value:w,className:"ml-5 bg-gray-200 p-1 md:w-[78%] w-[280px]",onChange:function(e){return C(e.target.value)},children:[(0,m.jsx)("option",{children:"active"}),(0,m.jsx)("option",{children:"deactive"})]})]}),x&&(0,m.jsxs)("div",{className:"".concat("active"===x?"ml-5 text-[14px] text-green-600 mt-2":"ml-5 text-[14px] text-red-600 mt-2"," "),children:["The current status of this account is ",x]}),Z&&(0,m.jsx)("p",{className:"ml-[20px] text-red-600 mt-2",children:Z}),(0,m.jsx)("button",{onClick:function(){return function(){return P.apply(this,arguments)}()},disabled:O,className:"".concat(O?"bg-gray-500":"bg-[#12557c] hover:bg-[#1b7fb9]","  text-white font-bold w-[90%] p-2 ml-5 "),children:"ARCHIVE"})]})]})})}):null};var h=function(e){var t=e.data,s=e.studinfo,o=e.beneinfo,l=(0,n.useState)(!1),c=(0,r.Z)(l,2),d=c[0],u=c[1],h=(0,n.useState)(!1),b=(0,r.Z)(h,2),f=b[0],g=b[1];return(0,m.jsxs)("div",{className:" md:grid-cols-7 grid-cols-1 justify-start  grid mb-1 bg-slate-300 rounded-md p-3 w-[100%] cursor-default",children:[(0,m.jsx)(p,{visible:d,data:t,close:u,beneinfo:o,studinfo:s}),(0,m.jsx)(x,{visible:f,data:t,close:g,beneinfo:o,studinfo:s}),(0,m.jsxs)("div",{className:"".concat("active"===t.status?"text-green-500 font-semibold":"text-red-500 font-semibold"," flex justify-center items-center gap-1"),children:[(0,m.jsx)("div",{className:"".concat("active"===t.status?"bg-green-500 font-semibold h-[10px] w-[10px] rounded-full":"bg-red-500 font-semibold h-[10px] w-[10px] rounded-full")}),t.status.toUpperCase()," "]}),(0,m.jsxs)("p",{children:[" ",t.beneName," "]}),(0,m.jsxs)("p",{className:"truncate w-[220px] ",children:[" ",t.beneEmail," "]}),(0,m.jsx)("p",{children:t.filterby}),(0,m.jsx)("p",{children:t.position.toLowerCase()}),(0,m.jsxs)("a",{onClick:function(){return u(!d)},className:"flex items-center gap-2 place-content-center cursor-pointer hover:text-orange-400",children:[(0,m.jsx)(i.y8H,{className:"cursor-pointer"})," Update"]}),(0,m.jsxs)("a",{onClick:function(){return g(!f)},className:"flex items-center gap-2 place-content-center hover:text-blue-600 cursor-pointer",children:[(0,m.jsx)(a.ALl,{})," Archive"," "]})]},t.id)};var b=function(e){var t=e.visible,s=e.beneinfo,n=e.studinfo,r=e.setViewAccounts;return t?(0,m.jsx)(m.Fragment,{children:s?(0,m.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 backdrop-blur-sm flex justify-center items-center p-4 ",children:(0,m.jsx)("div",{className:"bg-white h-[500px] w-[1200px] rounded-md shadow-lg shadow-black","data-aos":"zoom-in","data-aos-duration":"500",children:(0,m.jsxs)("div",{className:"text-black h-[100%] text-center p-4",children:[(0,m.jsxs)("div",{className:"h-[90%] overflow-y-auto",children:[(0,m.jsxs)("div",{className:" grid-cols-1 md:grid-cols-7 justify-start  grid mb-1 bg-blue-900 bg-opacity-[60%] rounded-md p-3 w-[100%] font-bold",children:[(0,m.jsx)("p",{children:" Status "}),(0,m.jsx)("p",{children:" Name "}),(0,m.jsx)("p",{children:" Email "}),(0,m.jsx)("p",{children:" Program "}),(0,m.jsx)("p",{children:" Position "}),(0,m.jsx)("p",{children:" Update "}),(0,m.jsx)("p",{children:" Archive "})]}),s.sort((function(e,t){return e.status<t.status?-1:1})).map((function(e){return(0,m.jsx)(h,{data:e,studinfo:n,beneinfo:s},e.id)}))]}),(0,m.jsx)("button",{className:"mt-2 hover:text-red-500 hover:underline text-[20px]",onClick:function(){return r(!1)},children:"Close"})]})})}):(0,m.jsx)("div",{children:"Something Wrong with the connection"})}):null}}}]);
//# sourceMappingURL=170.81ce3497.chunk.js.map