{"version":3,"file":"static/js/116.800af123.chunk.js","mappings":"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","sources":["components/StudentNavbar.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport supabase from \"./iMonitorDBconfig\";\nimport AOS from \"aos\";\nimport \"aos/dist/aos.css\";\nimport { IoMdNotifications } from \"react-icons/io\";\nimport { MdOutlineKeyboardDoubleArrowRight } from \"react-icons/md\";\nimport moment from \"moment\";\n\nfunction Navbar({ email }) {\n  const [open, setOpen] = useState(true);\n  const [notif, setNotif] = useState(false);\n  const [message, setMessage] = useState();\n  const [announcement_NOTIF, setAnnouncement_NOTIF] = useState();\n  const [messagesNumber, setMessNumber] = useState(0);\n  // AOS ANIMATION\n  useEffect(() => {\n    AOS.init();\n  }, []);\n\n  useEffect(() => {\n    checkmessage();\n    fetchAnnouncemnt_INFO();\n    supabase\n      .channel(\"custom-filter-channel\")\n      .on(\n        \"postgres_changes\",\n        {\n          event: \"*\",\n          schema: \"public\",\n          table: \"Messaging\",\n        },\n        (payload) => {\n          checkmessage();\n        }\n      )\n      .on(\n        \"postgres_changes\",\n        {\n          event: \"*\",\n          schema: \"public\",\n          table: \"AnnouncementTable\",\n        },\n        (payload) => {\n          fetchAnnouncemnt_INFO();\n        }\n      )\n      .subscribe();\n  }, []);\n\n  const [counter, setCounter] = useState(0);\n\n  async function fetchAnnouncemnt_INFO() {\n    const { data: announce, count } = await supabase\n      .from(\"AnnouncementTable\")\n      .select(\"*\", { count: \"exact\" });\n\n    var user_email = email;\n    let number_notif = 0;\n\n    const select = (itemsRead) => {\n      setCounter(count - itemsRead);\n\n      if (itemsRead !== count) {\n        setAnnouncement_NOTIF(true);\n      }\n      if (itemsRead === count) {\n        setAnnouncement_NOTIF(false);\n      }\n    };\n\n    for (let index = 0; index < announce.length; index++) {\n      var per_announce = [announce[index]];\n      for (let index1 = 0; index1 < per_announce.length; index1++) {\n        var reads_by = per_announce[index1].readsBy;\n        for (let index2 = 0; index2 < reads_by.length; index2++) {\n          if (reads_by[index2] === user_email) {\n            number_notif++;\n          }\n        }\n      }\n    }\n    select(number_notif);\n  }\n\n  async function checkmessage() {\n    const { data: studdata } = await supabase\n      .from(\"StudentInformation\")\n      .select()\n      .eq(\"studemail\", email)\n      .single();\n\n    const { data: studMess, count } = await supabase\n      .from(\"Messaging\")\n      .select(\"*\", { count: \"exact\" })\n      .match({ contactwith: studdata.studname, readmessage: \"FALSE\" });\n\n    setMessNumber(count);\n    for (let index = 0; index < studMess.length; index++) {\n      if (studMess[index].readmessage === false) {\n        setNotif(true);\n      } else {\n        setNotif(false);\n      }\n    }\n    setMessage(studMess);\n  }\n\n  const divRef = useRef(null);\n\n  const toggleDiv = () => {\n    setOpen(!open);\n  };\n\n  const handleClickOutside = (event) => {\n    if (divRef.current && !divRef.current.contains(event.target)) {\n      setOpen(true);\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener(\"mousedown\", handleClickOutside);\n\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, []);\n\n  useEffect(() => {\n    recordLogin();\n  }, [email]);\n\n  async function recordLogin() {\n    var date = moment(new Date()).format(\"LLL\");\n\n    const { data: actlog } = await supabase\n      .from(\"StudentInformation\")\n      .select()\n      .eq(\"studemail\", email)\n      .single();\n\n    if (actlog) {\n      const { data: insertactlog } = await supabase\n        .from(\"ActivityLog\")\n        .insert([{ name: actlog.studname, button: \"Logged In\", time: date }]);\n    }\n  }\n\n  function handleAnnouncementButtonClicked() {\n    setOpen(!open);\n  }\n\n  return (\n    <div className=\"flex flex-col relative z-99 \">\n      {/* SIDE BAR */}\n      <div\n        ref={divRef}\n        className={`${\n          open\n            ? \"transition-transform -translate-x-full duration-300\"\n            : \"transition-transform translate-x-0 duration-500\"\n        } absolute flex w-52 h-screen  bg-[#5885AF] transition-transform  -translate-x-full md:translate-x-0`}\n      >\n        <div\n          className=\"ml-[208px] pt-[10px] absolute flex\"\n          onClick={() => toggleDiv()}\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            strokeWidth={2}\n            stroke=\"currentColor\"\n            className={`${\n              open ? \"rotate-0 duration-300\" : \" rotate-180 duration-300\"\n            } w-7 h-7 text-white  hover:text-[#60A3D9] hover:cursor-pointer md:hidden visible`}\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              d=\"M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5\"\n            />\n          </svg>\n          {notif || announcement_NOTIF ? (\n            <div className=\"h-4 w-4  rounded-full bg-red-500 md:hidden visible\" />\n          ) : (\n            \"\"\n          )}\n        </div>\n        <aside className={\"relative\"}>\n          <div className=\"px-3 py-4 \">\n            {/*Attendance*/}\n            <Link\n              to=\"/\"\n              onClick={() => setOpen(!open)}\n              className={\n                \"flex items-center p-2 rounded-lg text-white hover:bg-[#274472] transform hover:translate-x-2 hover:shadow-md\"\n              }\n            >\n              <svg\n                aria-hidden=\"true\"\n                className=\"w-6 h-6 text-white\"\n                fill=\"currentColor\"\n                viewBox=\"0 0 576 512\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path d=\"M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H512c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm80 256h64c44.2 0 80 35.8 80 80c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16c0-44.2 35.8-80 80-80zm-32-96a64 64 0 1 1 128 0 64 64 0 1 1 -128 0zm256-32H496c8.8 0 16 7.2 16 16s-7.2 16-16 16H368c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64H496c8.8 0 16 7.2 16 16s-7.2 16-16 16H368c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64H496c8.8 0 16 7.2 16 16s-7.2 16-16 16H368c-8.8 0-16-7.2-16-16s7.2-16 16-16z\" />\n              </svg>\n              <span className=\"ml-3\">Attendance</span>\n            </Link>\n\n            {/*Announcement*/}\n            <Link\n              to=\"/Announcement\"\n              onClick={() => handleAnnouncementButtonClicked()}\n              className=\"flex items-center p-2 rounded-lg text-white hover:bg-[#274472] transform hover:translate-x-2 hover:shadow-md\"\n            >\n              <svg\n                aria-hidden=\"true\"\n                className=\"w-6 h-6 text-white\"\n                fill=\"currentColor\"\n                viewBox=\"0 0 576 512\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path d=\"M64 0C28.7 0 0 28.7 0 64V352c0 35.3 28.7 64 64 64H240l-10.7 32H160c-17.7 0-32 14.3-32 32s14.3 32 32 32H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H346.7L336 416H512c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H64zM512 64V288H64V64H512z\" />\n              </svg>\n              <span className=\"ml-3 flex\">\n                Announcement{\" \"}\n                <em>\n                  {announcement_NOTIF && (\n                    <div className=\"bg-red-500 h-3 w-3 rounded-full ml-1\" />\n                  )}\n                </em>\n              </span>\n              {announcement_NOTIF && (\n                <label className=\"text-[8px] ml-2 p-0.5 rounded-sm bg-slate-500 text-white\">\n                  +{counter}\n                </label>\n              )}\n            </Link>\n            {/*Message*/}\n            <Link\n              to=\"/Message\"\n              onClick={() => setOpen(!open)}\n              className=\"flex items-center p-2 rounded-lg text-white hover:bg-[#274472] transform hover:translate-x-2 hover:shadow-md\"\n            >\n              <div className=\"flex items-center\">\n                <svg\n                  aria-hidden=\"true\"\n                  className=\"w-6 h-6 text-white\"\n                  fill=\"currentColor\"\n                  viewBox=\"0 0 512 512\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path d=\"M64 0C28.7 0 0 28.7 0 64V352c0 35.3 28.7 64 64 64h96v80c0 6.1 3.4 11.6 8.8 14.3s11.9 2.1 16.8-1.5L309.3 416H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H64z\" />\n                </svg>\n                <span className=\"ml-3 flex \">\n                  Message\n                  {messagesNumber > 0 && (\n                    <div className=\"h-[12px] w-[12px] bg-red-500 rounded-full\" />\n                  )}\n                  {/* <IoMdNotifications className=\"text-red-600 ml-2 text-[20px]\" /> */}\n                </span>\n                {messagesNumber > 0 && (\n                  <label className=\"text-white bg-gray-500 rounded-md h-fit px-1 font-semibold font-mono text-[10px] items-center flex ml-[40px]\">\n                    +{messagesNumber}\n                  </label>\n                )}\n              </div>\n            </Link>\n          </div>\n        </aside>\n      </div>\n    </div>\n  );\n}\n\nexport default Navbar;\n"],"names":["_ref","email","_useState","useState","_useState2","_slicedToArray","open","setOpen","_useState3","_useState4","notif","setNotif","_useState5","_useState6","setMessage","_useState7","_useState8","announcement_NOTIF","setAnnouncement_NOTIF","_useState9","_useState10","messagesNumber","setMessNumber","useEffect","AOS","checkmessage","fetchAnnouncemnt_INFO","supabase","channel","on","event","schema","table","payload","subscribe","_useState11","_useState12","counter","setCounter","_fetchAnnouncemnt_INFO","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$supabase$from$","announce","count","user_email","number_notif","select","index","per_announce","index1","reads_by","index2","wrap","_context","prev","next","from","sent","data","itemsRead","length","readsBy","stop","_checkmessage","_callee2","_yield$supabase$from$2","studdata","_yield$supabase$from$3","studMess","_context2","eq","single","match","contactwith","studname","readmessage","divRef","useRef","handleClickOutside","current","contains","target","_recordLogin","_callee3","date","_yield$supabase$from$4","actlog","_yield$supabase$from$5","_context3","moment","Date","format","insert","name","button","time","document","addEventListener","removeEventListener","recordLogin","_jsx","className","children","_jsxs","ref","concat","onClick","xmlns","fill","viewBox","strokeWidth","stroke","strokeLinecap","strokeLinejoin","d","Link","to"],"sourceRoot":""}