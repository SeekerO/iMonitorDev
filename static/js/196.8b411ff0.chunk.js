(self.webpackChunkimonitor=self.webpackChunkimonitor||[]).push([[196],{17349:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}});var s=n(74165),a=n(15861),r=n(29439),c=n(72791),i=n(43621),o=(n(99607),n(80184));var l=function(e){var t,n=e.studinfo,l=e.setGetStudName,d=e.message,u=e.setShowMessage,m=e.setSeen,x=e.beneName,p=e.setGetID,f=(e.read,e.setGetEmail),h=e.setAvatarColor,b=e.setAvatarURL,g=e.setOnlineStatus,v=e.getRole,w=e.setBackToScroll,j=(0,c.useState)(),N=(0,r.Z)(j,2),y=N[0],Z=N[1],S=(0,c.useState)(),k=(0,r.Z)(S,2),z=k[0],C=k[1],M=(0,c.useState)(!1),E=(0,r.Z)(M,2),_=E[0],L=E[1],F=(0,c.useState)(),A=(0,r.Z)(F,2),U=A[0],I=A[1],D=(0,c.useState)(0),q=(0,r.Z)(D,2),R=q[0],B=q[1];function P(){return(P=(0,a.Z)((0,s.Z)().mark((function e(t){var n,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.storage.from("ProfilePic").list(t+"/",{limit:1,offset:0});case 3:n=e.sent,(a=n.data)&&(L(!0),I("https://ouraqybsyczzrrlbvenz.supabase.co/storage/v1/object/public/ProfilePic/".concat(t,"/").concat(a[0].name)),C("https://ouraqybsyczzrrlbvenz.supabase.co/storage/v1/object/public/ProfilePic/".concat(t,"/").concat(a[0].name))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),L(!1);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function T(e){var n,s=0;for(n=0;n<e.length;n+=1)s=e.charCodeAt(n)+((s<<5)-s);var a="#";for(n=0;n<3;n+=1){a+="00".concat((s>>8*n&255).toString(16)).slice(-2)}return t=a,a}function O(){return G.apply(this,arguments)}function G(){return(G=(0,a.Z)((0,s.Z)().mark((function e(){var t,a,r,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.from("Messaging").select("*",{count:"exact"}).match({name:n.studname,contactwith:x,readmessage:"FALSE"});case 3:if(t=e.sent,a=t.data,r=t.count,B(r),!a){e.next=17;break}c=0;case 9:if(!(c<a.length)){e.next=17;break}if(a[c].name!==n.studname||!1!==a[c].readmessage||a[c].contactwith!==x){e.next=13;break}return Z(!0),e.abrupt("return");case 13:Z(!1);case 14:c++,e.next=9;break;case 17:e.next=21;break;case 19:e.prev=19,e.t0=e.catch(0);case 21:case"end":return e.stop()}}),e,null,[[0,19]])})))).apply(this,arguments)}function W(){l(n.studname),p(n.id),u(!0),function(){Y.apply(this,arguments)}(),f(n.studemail),V(),h(t),b(U),g(n.onlineStatus),v(""),Z(!1),w(!1)}(0,c.useEffect)((function(){Z(!1)}),[d]),(0,c.useEffect)((function(){O()}),[n]),(0,c.useEffect)((function(){!function(e){P.apply(this,arguments)}(n.studemail)}),[]);var H,V=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.from("Messaging").update({readmessage:!0}).match({name:n.studname,contactwith:x}).select();case 3:a=e.sent,a.data,O(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();function Y(){return(Y=(0,a.Z)((0,s.Z)().mark((function e(){var t,a,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.from("Messaging").select().eq("name",x);case 3:t=e.sent,a=t.data,(r=a[a.length-1]).name===x&&r.contactwith===n.studname&&!0===r.readmessage&&m(!1),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return(0,o.jsx)("div",{children:(0,o.jsxs)("div",{onClick:function(){return W()},className:"hover:bg-[#0047ab2d] hover:shadow-2xl shadow-black  hover:text-black flex p-1 cursor-pointer hover:p-2 duration-300",children:[(0,o.jsxs)("div",{className:"w-[100%] flex items-center gap-2 ",children:[_?(0,o.jsxs)("div",{className:"flex items-end",children:[(0,o.jsx)("img",{src:z,className:"h-[40px] w-[40px] rounded-full border-2 border-white"}),"online"===n.onlineStatus?(0,o.jsx)("div",{className:"bg-green-400 h-[13px] w-[13px] -ml-3 border-2 border-white rounded-full"}):(0,o.jsx)("div",{className:"bg-gray-400 h-[13px] w-[13px] -ml-3 border-2 border-white rounded-full "})]}):(H=n.studname,(0,o.jsxs)("div",{className:"flex items-end",children:[(0,o.jsx)("div",{style:{background:T(H)},className:"flex text-white items-center justify-center h-[40px]  w-[40px] rounded-full font-thin border-2 border-white",children:"".concat(H.toUpperCase().split(" ")[0][0])}),"online"===n.onlineStatus?(0,o.jsx)("div",{className:"bg-green-400 h-[13px] w-[13px] -ml-3 rounded-full border-2 border-white"}):(0,o.jsx)("div",{className:"bg-gray-400 h-[13px] w-[13px] -ml-3 rounded-full border-2 border-white"})]})),(0,o.jsxs)("div",{className:"grid",children:[(0,o.jsx)("p",{className:" text-[13px] font-sans font-semibold capitalize ",children:n.studname}),(0,o.jsx)("p",{className:" text-[13px] font-sans font-semibold",children:n.studsection})]})]}),(0,o.jsx)("div",{className:"flex",children:y&&(0,o.jsx)("div",{className:" text-red-600 font-bold flex items-start",children:(0,o.jsxs)("div",{className:"text-[9px] flex items-center",children:[(0,o.jsx)("div",{className:"h-2 w-2 rounded-full bg-red-600"}),"+",R]})})})]})})},d=n(72426),u=n.n(d),m=n(75589),x=n(1640),p=n(96048),f=n.n(p),h=n(53532);var b=function(e){var t,n,s=e.e,a=e.userInfo,i=e.ID,l=e.name,d=e.receivedmessages,u=(e.allbeneinfo,(0,c.useState)()),m=(0,r.Z)(u,2),x=m[0],p=m[1],f=(0,c.useState)(),b=(0,r.Z)(f,2),g=b[0],v=b[1];return console.log(d),(0,o.jsxs)("div",{className:"",children:[(0,o.jsx)("div",{children:(n=s.name,t=n,(0,o.jsx)(o.Fragment,{children:d.map((function(e,s){return(0,o.jsxs)("div",{children:[e.name===a.beneName&&n===e.message&&(0,o.jsx)("img",{onClick:function(){return v(!g),void p("https://ouraqybsyczzrrlbvenz.supabase.co/storage/v1/object/public/MessageFileUpload/".concat(i,"_").concat(a.id,"/").concat(a.id,"/").concat(t))},className:"w-[240px] h-[200px]",src:"https://ouraqybsyczzrrlbvenz.supabase.co/storage/v1/object/public/MessageFileUpload/".concat(i,"_").concat(a.id,"/").concat(a.id,"/").concat(n)}),e.name===l&&n===e.message&&(0,o.jsx)("img",{onClick:function(){return v(!g),void p("https://ouraqybsyczzrrlbvenz.supabase.co/storage/v1/object/public/MessageFileUpload/".concat(i,"_").concat(a.id,"/").concat(i,"/").concat(t))},className:"w-[240px] h-[200px] bg-gray-500",src:"https://ouraqybsyczzrrlbvenz.supabase.co/storage/v1/object/public/MessageFileUpload/".concat(i,"_").concat(a.id,"/").concat(i,"/").concat(n)}),e.name===a.beneName&&n===e.message&&(0,o.jsx)("img",{onClick:function(){return v(!g),void p("https://ouraqybsyczzrrlbvenz.supabase.co/storage/v1/object/public/MessageFileUpload/".concat(i,"_").concat(a.id,"/").concat(i,"/").concat(t))},className:"w-[240px] h-[200px]",src:"https://ouraqybsyczzrrlbvenz.supabase.co/storage/v1/object/public/MessageFileUpload/".concat(a.id,"_").concat(i,"/").concat(i,"/").concat(n)})]},s)}))}))}),(0,o.jsx)(h.Z,{imgsrc:x,name:s.name,onClose:v,visible:g})]})},g=n(64802),v=n(31243),w=n(78820);n(20216);var j=function(e){var t=e.e,n=e.userInfo,r=e.ID;function c(){return(c=(0,a.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.head("https://ouraqybsyczzrrlbvenz.supabase.co/storage/v1/object/public/MessageFileUpload/".concat(r,"_").concat(n.id,"/").concat(n.id,"/").concat(t.name));case 3:return e.sent,e.abrupt("return",(0,g.saveAs)("https://ouraqybsyczzrrlbvenz.supabase.co/storage/v1/object/public/MessageFileUpload/".concat(r,"_").concat(n.id,"/").concat(n.id,"/").concat(t.name),t.name));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,g.saveAs)("https://ouraqybsyczzrrlbvenz.supabase.co/storage/v1/object/public/MessageFileUpload/".concat(r,"_").concat(n.id,"/").concat(r,"/").concat(t.name),t.name));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{onClick:function(){return function(){return c.apply(this,arguments)}()},className:"flex items-center mt-1 cursor-default",children:[(0,o.jsx)("div",{className:"h-[60px] w-[60px] p-2 bg-slate-400 flex place-content-center items-center rounded-l-md",children:(0,o.jsx)(w.xNt,{className:"text-slate-100"})}),(0,o.jsx)("div",{className:"h-[60px] p-2  bg-blue-900 w-[100%] flex items-center rounded-r-md  text-white font-light  ",children:(0,o.jsxs)("label",{className:"w-[160px]  truncate",children:[function(e){var t=e.split(".")[1];return e=t,t}(t.name)," "]})})]})})},N=n(39126),y=n(84373),Z=n(16856),S=n(76053),k=n(40071),z=n(26249),C=n(48273),M=n(41578),E=n(75985);var _=function(e){var t,n=e.studinfo,l=e.setGetStudName,d=e.message,u=e.setShowMessage,m=e.setSeen,x=e.beneName,p=e.setGetID,f=(e.read,e.run,e.setGetEmail),h=e.setAvatarColor,b=e.setAvatarURL,g=e.setOnlineStatus,v=e.getRole,w=e.setBackToScroll,j=(0,c.useState)(),N=(0,r.Z)(j,2),y=N[0],Z=N[1],S=(0,c.useState)(),k=(0,r.Z)(S,2),z=k[0],C=k[1],M=(0,c.useState)(!1),E=(0,r.Z)(M,2),_=E[0],L=E[1],F=(0,c.useState)(),A=(0,r.Z)(F,2),U=A[0],I=A[1],D=(0,c.useState)(0),q=(0,r.Z)(D,2),R=q[0],B=q[1];function P(e){var n,s=0;for(n=0;n<e.length;n+=1)s=e.charCodeAt(n)+((s<<5)-s);var a="#";for(n=0;n<3;n+=1){a+="00".concat((s>>8*n&255).toString(16)).slice(-2)}return t=a,a}function T(){return(T=(0,a.Z)((0,s.Z)().mark((function e(t){var n,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.storage.from("ProfilePic").list(t+"/",{limit:1,offset:0});case 3:n=e.sent,(a=n.data)&&(L(!0),I("https://ouraqybsyczzrrlbvenz.supabase.co/storage/v1/object/public/ProfilePic/".concat(t,"/").concat(a[0].name)),C("https://ouraqybsyczzrrlbvenz.supabase.co/storage/v1/object/public/ProfilePic/".concat(t,"/").concat(a[0].name))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),L(!1);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function O(){return G.apply(this,arguments)}function G(){return(G=(0,a.Z)((0,s.Z)().mark((function e(){var t,a,r,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.from("Messaging").select("*",{count:"exact"}).match({name:n.beneName,contactwith:x,readmessage:"FALSE"});case 3:if(t=e.sent,a=t.data,r=t.count,B(r),!a){e.next=19;break}c=0;case 9:if(!(c<a.length)){e.next=19;break}if(a[c].name!==n.beneName||a[c].contactwith!==x||!1!==a[c].readmessage){e.next=14;break}return console.log(!0),Z(!0),e.abrupt("return");case 14:console.log(!0),Z(!1);case 16:c++,e.next=9;break;case 19:e.next=23;break;case 21:e.prev=21,e.t0=e.catch(0);case 23:case"end":return e.stop()}}),e,null,[[0,21]])})))).apply(this,arguments)}function W(){l(n.beneName),p(n.id),u(!0),function(){Y.apply(this,arguments)}(),f(n.beneEmail),V(n.beneEmail),h(t),b(U),g(n.onlineStatus),v(n.ROLE),Z(!1),w(!1)}(0,c.useEffect)((function(){O()}),[n]),(0,c.useEffect)((function(){Z(!1)}),[d]),(0,c.useEffect)((function(){!function(e){T.apply(this,arguments)}(n.beneEmail)}),[]);var H,V=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.from("Messaging").update({readmessage:!0}).match({name:n.beneName,contactwith:x}).select();case 3:a=e.sent,a.data,O(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();function Y(){return(Y=(0,a.Z)((0,s.Z)().mark((function e(){var t,a,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.from("Messaging").select().eq("name",x);case 3:t=e.sent,a=t.data,(r=a[a.length-1]).name===x&&r.contactwith===n.beneName&&!0===r.readmessage&&m(!1),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return(0,o.jsx)("div",{children:x!==n.beneName?(0,o.jsxs)("div",{onClick:function(){return W()},className:"hover:bg-[#0047ab2d] bg-hover:shadow-2xl shadow-black hover:text-black flex p-1 cursor-pointer hover:p-2 duration-300",children:[(0,o.jsxs)("div",{className:"w-[100%] items-center flex gap-2",children:[_?(0,o.jsxs)("div",{className:"flex items-end",children:[(0,o.jsx)("img",{src:z,className:"h-[40px] w-[40px] rounded-full border-2 border-white"}),"online"===n.onlineStatus?(0,o.jsx)("div",{className:"bg-green-400 border-2 border-white    h-[13px] w-[13px] -ml-3 rounded-full"}):(0,o.jsx)("div",{className:"bg-gray-400 border-2 border-white   h-[13px] w-[13px] -ml-3 rounded-full"})]}):(H=n.beneName,(0,o.jsxs)("div",{className:"flex items-end",children:[(0,o.jsx)("div",{style:{background:P(H)},className:"flex text-white items-center justify-center h-[40px]  w-[40px] rounded-full font-thin border-2 border-white",children:"".concat(H.toUpperCase().split(" ")[0][0])}),"online"===n.onlineStatus?(0,o.jsx)("div",{className:"bg-green-400 h-[13px] w-[13px] -ml-3 rounded-full border-2 border-white"}):(0,o.jsx)("div",{className:"bg-gray-400 h-[13px] w-[13px] -ml-3 rounded-full border-2 border-white"})]})),(0,o.jsxs)("div",{className:"grid",children:[(0,o.jsx)("p",{className:" text-[13px] font-sans font-semibold capitalize ",children:n.beneName}),(0,o.jsxs)("p",{className:" text-[13px] font-sans font-semibold",children:[n.position," ","".concat("ALL"!==n.filterby?"| ".concat(n.filterby):""," ")]})]})]}),y&&(0,o.jsx)("div",{className:" text-red-600 font-bold flex items-start",children:(0,o.jsxs)("div",{className:"text-[9px] flex items-center",children:[(0,o.jsx)("div",{className:"h-2 w-2 rounded-full bg-red-600"}),"+",R]})})]}):""})};n(2384).Z.register();var L=function(e){var t=e.beneemail,n=(0,c.useState)(""),d=(0,r.Z)(n,2),p=d[0],h=d[1],g=(0,c.useState)([]),v=(0,r.Z)(g,2),L=v[0],F=v[1],A=(0,c.useState)(),U=(0,r.Z)(A,2),I=(U[0],U[1],(0,c.useState)("")),D=(0,r.Z)(I,2),q=D[0],R=D[1],B=(0,c.useState)(),P=(0,r.Z)(B,2),T=P[0],O=P[1],G=(0,c.useState)(),W=(0,r.Z)(G,2),H=W[0],V=W[1],Y=(0,c.useState)([]),K=(0,r.Z)(Y,2),X=K[0],J=K[1],Q=(0,c.useState)([]),$=(0,r.Z)(Q,2),ee=$[0],te=$[1],ne=(0,c.useState)([]),se=(0,r.Z)(ne,2),ae=se[0],re=se[1],ce=(0,c.useState)(),ie=(0,r.Z)(ce,2),oe=ie[0],le=ie[1],de=(0,c.useState)(""),ue=(0,r.Z)(de,2),me=ue[0],xe=ue[1],pe=(0,c.useState)(!0),fe=(0,r.Z)(pe,2),he=fe[0],be=fe[1],ge=(0,c.useState)([]),ve=(0,r.Z)(ge,2),we=ve[0],je=ve[1],Ne=(0,c.useState)(),ye=(0,r.Z)(Ne,2),Ze=(ye[0],ye[1],(0,c.useRef)(null)),Se=(0,c.useState)(window.innerWidth<=768),ke=(0,r.Z)(Se,2),ze=ke[0],Ce=ke[1],Me=(0,c.useState)(window.innerWidth>=768),Ee=(0,r.Z)(Me,2),_e=(Ee[0],Ee[1]),Le=(0,c.useState)(!1),Fe=(0,r.Z)(Le,2),Ae=Fe[0],Ue=Fe[1],Ie=(0,c.useState)(!1),De=(0,r.Z)(Ie,2),qe=De[0],Re=De[1],Be=(0,c.useState)(!1),Pe=(0,r.Z)(Be,2),Te=Pe[0],Oe=Pe[1],Ge=(0,c.useState)(!1),We=(0,r.Z)(Ge,2),He=We[0],Ve=(We[1],(0,c.useState)()),Ye=(0,r.Z)(Ve,2),Ke=Ye[0],Xe=Ye[1],Je=(0,c.useState)(""),Qe=(0,r.Z)(Je,2),$e=Qe[0],et=Qe[1],tt=(0,c.useState)(!1),nt=(0,r.Z)(tt,2),st=nt[0],at=nt[1],rt=(0,c.useState)(0),ct=(0,r.Z)(rt,2),it=ct[0],ot=ct[1],lt=(0,c.useState)(),dt=(0,r.Z)(lt,2),ut=dt[0],mt=dt[1],xt=(0,c.useState)(!1),pt=(0,r.Z)(xt,2),ft=pt[0],ht=pt[1],bt=(0,c.useState)(!1),gt=(0,r.Z)(bt,2),vt=gt[0],wt=gt[1],jt=(0,c.useState)(!1),Nt=(0,r.Z)(jt,2),yt=Nt[0],Zt=Nt[1],St=(0,c.useState)(0),kt=(0,r.Z)(St,2),zt=kt[0],Ct=kt[1],Mt=20*zt,Et=Math.ceil(it/20),_t=(0,c.useState)(),Lt=(0,r.Z)(_t,2),Ft=Lt[0],At=Lt[1],Ut=(0,c.useState)(!1),It=(0,r.Z)(Ut,2),Dt=It[0],qt=It[1],Rt=(0,c.useState)([]),Bt=(0,r.Z)(Rt,2),Pt=Bt[0],Tt=Bt[1],Ot=(0,c.useState)([]),Gt=(0,r.Z)(Ot,2),Wt=Gt[0],Ht=Gt[1],Vt=["jpg","jpeg","png","gif","bmp"],Yt=["docx","pdf","ods","pptx","xlsx"],Kt=(0,c.useState)(),Xt=(0,r.Z)(Kt,2),Jt=(Xt[0],Xt[1]),Qt=(0,c.useState)(),$t=(0,r.Z)(Qt,2),en=$t[0],tn=$t[1],nn=(0,c.useState)(),sn=(0,r.Z)(nn,2),an=sn[0],rn=sn[1],cn=(0,c.useState)(!1),on=(0,r.Z)(cn,2);on[0],on[1];(0,c.useEffect)((function(){var e=function(){Ce(window.innerWidth<=768),_e(window.innerWidth>=768),window.innerWidth<=768&&!0===qe&&Re(!0)};e(),window.addEventListener("resize",e),mt(!ut)}),[]),(0,c.useEffect)((function(){ln(),i.Z.channel("custom-update-channel").on("postgres_changes",{event:"UPDATE",schema:"public",table:"StudentInformation"},(function(e){ln()})).on("postgres_changes",{event:"UPDATE",schema:"public",table:"BeneAccount"},(function(e){ln()})).subscribe()}),[]),(0,c.useEffect)((function(){un(),i.Z.channel("custom-all-channel").on("postgres_changes",{event:"INSERT",schema:"public",table:"Messaging",filter:"contactwith=eq.".concat(X)},(function(e){un()})).on("postgres_changes",{event:"INSERT",schema:"public",table:"Messaging",filter:"name=eq.".concat(X)},(function(e){un()})).on("postgres_changes",{event:"UPDATE",schema:"public",table:"Messaging",filter:"contactwith=eq.".concat(X)},(function(e){un()})).on("presence",{event:"sync",table:"Messaging"},(function(e){var n=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.from("BeneAccount").update({onlineStatus:"online"}).eq("beneEmail",t).single();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n()})).subscribe()}),[q]);function ln(){return dn.apply(this,arguments)}function dn(){return dn=(0,a.Z)((0,s.Z)().mark((function e(){var n,a,r,c,o,l,d,u,m,x;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.from("BeneAccount").select();case 2:return n=e.sent,a=n.data,re(a),e.next=7,i.Z.from("BeneAccount").select().eq("beneEmail",t).single();case 7:if(r=e.sent,!(c=r.data)){e.next=30;break}if(J(c.beneName),te(c),c.id,"ALL"!==c.filterby){e.next=23;break}return e.next=16,i.Z.from("StudentInformation").select("*",{count:"exact"});case 16:o=e.sent,l=o.data,d=o.count,F(l),ot(d),e.next=30;break;case 23:return e.next=25,i.Z.from("StudentInformation").select("*",{count:"exact"}).match({studcourse:c.filterby});case 25:u=e.sent,m=u.data,x=u.count,F(m),ot(x);case 30:case"end":return e.stop()}}),e)}))),dn.apply(this,arguments)}var un=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){var t,n,a,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.from("Messaging").select().order("created_at",{ascending:!1}).match({name:X,contactwith:q});case 3:return t=e.sent,n=t.data,e.next=7,i.Z.from("Messaging").select().order("created_at",{ascending:!1}).match({name:q,contactwith:X});case 7:return a=e.sent,r=a.data,e.next=11,je(n.concat(r));case 11:e.next=15;break;case 13:e.prev=13,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();function mn(){return xn.apply(this,arguments)}function xn(){return(xn=(0,a.Z)((0,s.Z)().mark((function e(){var t,n,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===me.trim()){e.next=15;break}return e.next=3,i.Z.from("Messaging").insert([{name:X,message:me.trim(),contactwith:q,userID:ee.id}]);case 3:return t=e.sent,t.data,t.error,n={name:X,message:me.trim(),contactwith:q,userID:ee.id,created_at:u()().format()},je(we.concat(we.push(n))),e.next=10,i.Z.from("BeneAccount").update({last_Modif:u()().format()}).eq("beneName",X);case 10:a=e.sent,a.data,Oe(!1),xe(""),be(!0);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pn(){return fn.apply(this,arguments)}function fn(){return(fn=(0,a.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.from("Messaging").update({readmessage:!0}).match({name:q,contactwith:X}).select();case 2:t=e.sent,t.data;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hn(){return(hn=(0,a.Z)((0,s.Z)().mark((function e(){var t,n,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.from("Messaging").insert([{name:X,message:"\ud83d\udc4d\ud83c\udffb",contactwith:q,userID:ee.id}]);case 2:return n=e.sent,n.data,n.error,a={name:X,message:"\ud83d\udc4d\ud83c\udffb",contactwith:q,userID:ee.id,created_at:u()().format()},je(we.concat(we.push(a))),pn(),e.next=10,i.Z.from("BeneAccount").update({last_Modif:u()().format()}).eq("beneName",X);case 10:Oe(!1),xe(""),be(!0),null===(t=Ze.current)||void 0===t||t.scrollIntoView();case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bn=(0,c.useRef)(null);function gn(){jn(T),ht(!ft),window.innerWidth<=768&&(ft?(document.getElementById("contact").hidden=!1,document.getElementById("message").hidden=!1):(document.getElementById("contact").hidden=!0,document.getElementById("message").hidden=!0))}var vn=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){var t,n,a,r,c,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.ceil(99999999*Math.random()),e.next=3,i.Z.storage.from("MessageFileUpload").upload(T+"_"+ee.id+"/"+ee.id+"/"+t+"."+$e,Ke);case 3:if(n=e.sent,a=n.data,r=n.error,!a){e.next=20;break}return e.next=9,i.Z.from("BeneAccount").update({last_Modif:u()().format()}).eq("beneName",X);case 9:return c=e.sent,c.data,e.next=13,i.Z.from("Messaging").insert([{name:X,message:t+"."+$e,contactwith:q,userID:ee.id}]);case 13:o=e.sent,o.data,Xe(),et(),at(!1),wt(!1),Zt(!1);case 20:return r&&(E.Am.warn("Something went wrong please try again..",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"light"}),wt(!1),Zt(!1)),e.abrupt("return");case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function wn(){return(wn=(0,a.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wt(!0),Zt(!0),Oe(!1),xe(""),be(!0),vn(),e.abrupt("return");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jn(e){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,a.Z)((0,s.Z)().mark((function e(t){var n,a,r,c,o,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.storage.from("MessageFileUpload").list("".concat(t+"_"+ee.id)+"/"+ee.id,{limit:50,offset:0,sortBy:{column:"name",order:"asc"}});case 2:return n=e.sent,a=n.data,e.next=6,i.Z.storage.from("MessageFileUpload").list("".concat(ee.id+"_"+t)+"/"+ee.id,{limit:50,offset:0,sortBy:{column:"name",order:"asc"}});case 6:return r=e.sent,c=r.data,e.next=10,i.Z.storage.from("MessageFileUpload").list("".concat(t+"_"+ee.id)+"/"+t,{limit:50,offset:0,sortBy:{column:"name",order:"asc"}});case 10:return o=e.sent,l=o.data,At(l.concat(a.concat(c))),e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yn=function(e){return!!Vt.includes(e.split(".").pop().toLowerCase())||!Yt.includes(e.split(".").pop().toLowerCase())&&void 0};var Zn,Sn=(0,c.useRef)(),kn=(0,c.useState)(!1),zn=(0,r.Z)(kn,2),Cn=(zn[0],zn[1]),Mn=(0,c.useRef)(null),En=function(e){Mn.current&&!Mn.current.contains(e.target)&&gn()};return(0,c.useEffect)((function(){return document.addEventListener("mousedown",En),function(){document.removeEventListener("mousedown",En)}}),[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"w-[100%] h-screen md:pt-[2%] pt-[12%] md:p-5 p-1 flex justify-center   ",children:[null===L?(0,o.jsx)(z.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:!0,children:(0,o.jsx)(x.Z,{color:"inherit"})}):"",(0,o.jsxs)("div",{className:"  h-[87%] w-[100%] md:p-5  flex md:gap-3 gap-1 rounded-md  bg-[#90bbdf] bg-opacity-40 shadow-2xl items-center",children:[(0,o.jsxs)("div",{id:"contact",className:"".concat(window.innerWidth<=768?"  ".concat(qe?"hidden":"md:w-[250px] w-[100%]  md:flex-col bg-white rounded-l-md"):"","\n            md:w-[250px] w-[100%] md:h-[100%] h-[98%] md:flex-col bg-white rounded-l-md  shadow-md shadow-black"),children:[(0,o.jsxs)("div",{className:"font-bold text-[25px] h-[51px] text-center pt-1 text-white rounded-tl-md bg-[#274472] flex items-center justify-center ",children:[(0,o.jsx)(y.Y_V,{className:"text-[25px] text-white mr-0.5  mt-1"}),"Contacts"]}),(0,o.jsx)("center",{children:(0,o.jsxs)("div",{className:"bg-slate-300 flex w-[96%] rounded-md place-content-center mt-2 mb-2 ",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",className:"h-[13px] w-10 mt-2.5 ml-2",children:(0,o.jsx)("path",{d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"})}),(0,o.jsx)("input",{value:p,onChange:function(e){return h(e.target.value)},type:"text",className:"w-[100%] bg-slate-300 p-1 border-0 outline-none rounded-md",placeholder:"Search Here"})]})}),(0,o.jsxs)("div",{className:"md:h-[96%] h-[70%]",children:[L&&ae?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"max-h-[85%] md:max-h-[80%]  rounded-bl-md overflow-y-auto scroll-smooth",children:L.length>=0?(0,o.jsxs)(o.Fragment,{children:[1===ae.length?"":(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("label",{className:"flex justify-center bg-[#274472] font-semibold text-white p-1",children:"APO & ADVISER"}),ae.sort((function(e,t){var n=new Date(e.last_Modif),s=new Date(t.last_Modif);return n.getTime()<=s.getTime()?1:-1})).filter((function(e){try{if(""===p)return e;if(e.beneName.toLowerCase().includes(p.toLowerCase()))return e;if(e.position.toLowerCase().includes(p.toLowerCase()))return e}catch(t){}})).slice(Mt,Mt+20).map((function(e,t){return(0,o.jsx)(_,{studinfo:e,setGetStudName:R,setShowMessage:Re,setGetID:O,setSeen:Oe,message:we,beneName:X,read:Te,run:ut,index:t,setGetEmail:Jt,setAvatarColor:tn,setAvatarURL:rn,setOnlineStatus:V,getRole:le,setBackToScroll:Cn},e.id)}))]}),(0,o.jsx)("label",{className:"flex justify-center bg-[#274472] font-semibold text-white p-1",children:"STUDENT"}),L?(0,o.jsx)(o.Fragment,{children:L.length>0?(0,o.jsx)(o.Fragment,{children:L.sort((function(e,t){var n=new Date(e.last_Modif),s=new Date(t.last_Modif);new Date;return n.getTime()<=s.getTime()?1:-1})).filter((function(e){try{if(""===p)return e;if(e.studname.toLowerCase().includes(p.toLowerCase()))return e;if(e.studsection.toLowerCase().includes(p.toLowerCase()))return e}catch(t){}})).slice(Mt,Mt+20).map((function(e,t){return(0,o.jsx)(l,{studinfo:e,setGetStudName:R,setShowMessage:Re,setGetID:O,setSeen:Oe,message:we,beneName:X,read:Te,run:ut,index:t,setGetEmail:Jt,setAvatarColor:tn,setAvatarURL:rn,setOnlineStatus:V,getRole:le,setBackToScroll:Cn},e.id)}))}):(0,o.jsx)("div",{className:"flex justify-center mt-10 font-semibold",children:"NO DATA"})}):(0,o.jsx)("div",{className:"flex justify-center mt-10 font-semibold",children:(0,o.jsx)(C.Y8,{visible:!0,height:"80",width:"80",colors:["  #4f8bec","#3760a2","#274472"],ariaLabel:"radio-loading",wrapperStyle:{},wrapperClass:"radio-wrapper"})})]}):(0,o.jsx)("div",{className:" h-[77%]   place-content-center flex justify-center items-center",children:(0,o.jsx)("label",{className:"font-bold text-[20px]",children:"No user"})})})}):(0,o.jsx)("div",{className:"flex items-center justify-center place-content-center h-[100%]",children:(0,o.jsx)(C.gy,{height:"80",width:"80",color:"#0074B7",ariaLabel:"tail-spin-loading",radius:"1",wrapperStyle:{},wrapperClass:"",visible:!0})}),(0,o.jsx)("div",{className:" bg-[#274472] w-[100%] bottom-0",children:(0,o.jsx)(f(),{previousLabel:"Previous",nextLabel:"Next",pageCount:Et,onPageChange:function(e){var t=e.selected;Ct(t)},containerClassName:"".concat(Et>5?"flex justify-center flex items-center font-semibold":"flex justify-center flex items-center font-semibold gap-2"),previousLinkClassName:"bg-[#274472] p-1 rounded-md flex items-center text-white",nextLinkClassName:"bg-[#274472] p-1 rounded-md flex items-center text-white",disabledLinkClassName:"bg-[#274472] p-1 rounded-md text-white",activeLinkClassName:"bg-[#274472] p-1 rounded-md text-white "})})]})]}),(0,o.jsx)("div",{id:"message",className:"".concat(window.innerWidth<=768?"".concat(qe||ft?" w-[100%] md:h-[100%] h-[95%]  ":"hidden"," bg-[#274472] -mt-10"):" w-[100%] md:h-[100%] h-[90%] bg-[#274472] flex flex-col  shadow-md shadow-black"),children:q&&we?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:" p-2 flex",children:[ze&&(0,o.jsx)("div",{onClick:function(){return Re(!qe),void(!1===Ae?(Ue(!0),jn(T)):Ue(!1))},className:" pt-1 group",children:(0,o.jsx)(Z.rpj,{className:"text-[25px] text-white group-hover:text-slate-400 "})}),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:" flex items-center pl-[1%] mt-0.5 text-[15px] w-[100%] gap-1 font-semibold text-white",children:[an?(0,o.jsxs)("div",{className:"flex items-end",children:[(0,o.jsx)("img",{src:an,className:"h-[40px] w-[40px] rounded-full border-2 border-[#274472]"}),"online"===H?(0,o.jsx)("div",{className:"bg-green-400 h-[13px] w-[13px] -ml-3 rounded-full border-2 border-[#274472]"}):(0,o.jsx)("div",{className:"bg-gray-400 h-[13px] w-[13px] -ml-3 rounded-full border-2 border-[#274472]"})]}):(Zn=q,(0,o.jsxs)("div",{className:"flex items-end",children:[(0,o.jsx)("div",{style:{background:en},className:"flex text-white items-center justify-center h-[40px]  w-[40px] rounded-full font-thin border-2 border-[#274472] hover:no-underline",children:"".concat(Zn.toUpperCase().split(" ")[0][0])}),"online"===H?(0,o.jsx)("div",{className:"bg-green-400 h-[13px] w-[13px] -ml-3 rounded-full border-2 border-[#274472]"}):(0,o.jsx)("div",{className:"bg-gray-400 h-[13px] w-[13px] -ml-3 rounded-full border-2 border-[#274472]"})]})),(0,o.jsx)("label",{onClick:function(){return gn()},className:"hover:text-blue-500 hover:underline capitalize",children:q})]})})]}),we?(0,o.jsxs)("div",{ref:Sn,onScroll:function(){},className:"w-[100%] bg-[#bfd7eddc] p-3 overflow-y-auto overflow-x-hidden md:min-h-[79%] min-h-[65%]",children:[we.sort((function(e,t){return e.created_at<=t.created_at?-1:1})).map((function(e,t){return(0,o.jsx)("div",{children:(0,o.jsx)(m.Z,{message:e,getstudname:q,beneName:X,beneinfo:ee,file:Ft,studID:T,setDisplayImage:Tt,displayimage:Pt,setDisplayFile:Ht,displayfile:Wt,avatarURL:an,isRole:oe,receivedmessages:we,allbeneinfo:ae})},t)})),(0,o.jsx)("div",{ref:Ze}),He&&(0,o.jsxs)("div",{className:"text-[10px] text-blue-700 flex justify-end",children:["Delivered",(0,o.jsx)(w.mny,{className:"mt-0.5 ml-0.5"})]}),Te&&(0,o.jsxs)("div",{className:" flex justify-end text-[10px]",children:["Seen by ",q]})]}):(0,o.jsx)("div",{children:"No Messages Found"}),(0,o.jsxs)("div",{className:"flex flex-col w-[100%] h-auto",children:[(0,o.jsx)("input",{accept:"e.g:.jpg,.jpeg,.png,.gif,.bmp,.docx,.pdf,.ods,.pptx,.xlsx",type:"file",onChange:function(e){var t=e.target.files[0];void 0!==t&&(Xe(t),et(t.name),t&&at(!0))},ref:bn,style:{display:"none"}}),(0,o.jsxs)("div",{className:"flex w-[100%] h-[100%] ",children:[(0,o.jsx)("button",{className:"button-upload ml-1 mt-4 hover:bg-slate-300 bg-white p-2 rounded-full h-fit items-center justify-center ",onClick:function(e){bn.current.click()},children:(0,o.jsx)(S.Ypb,{className:""})}),st?(0,o.jsx)("div",{className:"absolute -mt-[35px] ml-[2%] ",children:(0,o.jsxs)("div",{className:"flex w-[100%] gap-2 items-center",children:[(0,o.jsx)("a",{disabled:yt,onClick:function(){return Xe(),et(),void at(!1)},className:"".concat(yt?"hidden":"rounded-full bg-slate-600 h-[20px] w-[20px] p-4 justify-center flex items-center hover:bg-red-400 cursor-pointer text-white hover:text-black"),children:"X"}),(0,o.jsxs)("div",{className:"flex bg-[#5584ab] rounded-md ",children:[(0,o.jsx)("label",{className:"flex items-center pl-2 pr-2 text-white min-w-[100px] max-w-[300px]  truncate overflow-hidden ",children:$e}),(0,o.jsx)("button",{onClick:function(){return function(){return wn.apply(this,arguments)}()},className:"".concat(vt?"bg-gray-500":"bg-[#60A3D9] hover:bg-blue-500 hover:shadow-lg"," h-[20px] p-4 flex text-slate-200  hover:text-black  font-semibold justify-center items-center rounded-sm ml-2"),children:vt?(0,o.jsxs)("div",{className:"flex gap-1 text-white",children:["Sending",(0,o.jsx)(C.gy,{height:"25",width:"25",color:"#ffffff",ariaLabel:"tail-spin-loading",radius:"0",wrapperStyle:{},visible:!0})]}):"SEND"})]})]})}):"",(0,o.jsxs)("div",{className:"visible w-full h-auto justify-center flex",children:[(0,o.jsx)("textarea",{onKeyDown:function(e){"Enter"===e.key&&mn()},value:me,onChange:function(e){return xe(e.target.value)},onClick:function(){return pn()},rows:"3",className:"mt-2 mb-2 ml-1 p-1 w-[100%] h-[50px] text-sm text-gray-900  rounded-md resize-none",placeholder:"Write Remaks Here.."}),""===me?(0,o.jsx)("button",{onClick:function(){return function(){return hn.apply(this,arguments)}()},className:"bg-[#60A3D9] group h-[50px] w-[55px] rounded-full flex items-center justify-center ml-[10px] mr-[10px] mt-[8px]  ",children:(0,o.jsx)(y.rdj,{className:" text-[#274472] group-hover:text-white md:text-[30px] text-[25px]"})}):(0,o.jsx)("button",{onClick:function(){return mn()},className:" bg-[#60A3D9] group  h-[50px] w-[55px] rounded-full flex items-center justify-center ml-[10px] mr-[10px] mt-[8px] hover:ring-1 hover:ring-white",children:(0,o.jsx)(k.yhK,{className:"".concat(he?" text-[#274472] md:text-[30px] text-[20px]":" text-[#274472] group-hover:text-white md:text-[30px] text-[20px]","  ")})})]})]})]})]}):(0,o.jsxs)("div",{className:"flex flex-col place-content-center items-center justify-center h-[100%] text-white",children:[(0,o.jsx)(M.me0,{className:"text-[200px]"}),(0,o.jsx)("label",{className:"text-[30px] font-bold",children:"No chats selected"})]})}),ft?(0,o.jsx)("div",{ref:Mn,className:"h-[100%] ",children:(0,o.jsxs)("div",{ref:Mn,className:"".concat(window.innerWidth<=768?"".concat(ft?" w-screen  bg-slate-200 h-[100%] overflow-auto shadow-md shadow-black rounded-r-md  ":"hidden "):"  w-[250px] bg-slate-200 h-[100%] overflow-auto shadow-md shadow-black rounded-r-md ","  "),children:[(0,o.jsxs)("div",{ref:Mn,className:"bg-[#274472] p-3 flex text-[15px] gap-1 text-white font-bold rounded-tr-md",children:[ze&&(0,o.jsx)("div",{onClick:function(){return gn()},className:" pt-1 group",children:(0,o.jsx)(Z.rpj,{className:"text-[25px] text-white group-hover:text-slate-400 "})}),(0,o.jsxs)("div",{ref:Mn,className:"grid grid-cols-2 w-[100%] ",children:[(0,o.jsxs)("a",{onClick:function(){return qt(!Dt)},className:"".concat(Dt?"":"bg-slate-200 text-slate-700"," hover:text-blue-400 flex items-center gap-1 cursor-pointer rounded-md p-1 justify-center"),children:[(0,o.jsx)(N.vGR,{className:"text-[20px]"}),"IMAGE"]}),(0,o.jsxs)("a",{onClick:function(){return qt(!Dt)},className:"".concat(Dt?"bg-slate-200 text-slate-700":""," hover:text-blue-400 flex items-center gap-1 cursor-pointer rounded-md p-1 justify-center"),children:[(0,o.jsx)(w.y6u,{className:"text-[20px]"}),"FILE"]})]})]}),(0,o.jsx)("div",{className:"flex flex-col items-center justify-center p-1 mt-2 text-[10px] font-semibold",children:(0,o.jsx)("p",{children:"File Uploaded "})}),Dt?(0,o.jsx)("div",{className:"",children:(0,o.jsx)("div",{className:"md:w-[100%] p-2",children:null===Ft||void 0===Ft?void 0:Ft.sort((function(e,t){return e.created_at<=t.created_at?1:-1})).map((function(e,t){return(0,o.jsx)("div",{children:!1===yn(e.name)&&(0,o.jsx)(j,{e:e,userInfo:ee,ID:T,receivedmessages:we,index:t,allbeneinfo:ae})},t)}))})}):(0,o.jsx)("div",{className:"",children:(0,o.jsx)("div",{className:"w-[100%] p-1",children:null===Ft||void 0===Ft?void 0:Ft.sort((function(e,t){return e.created_at<=t.created_at?1:-1})).map((function(e,t){return(0,o.jsx)("div",{className:"bg-gray-300  mt-0.5 rounded-md",children:!0===yn(e.name)&&(0,o.jsx)(b,{e:e,userInfo:ee,ID:T,name:q,receivedmessages:we,allbeneinfo:ae},e.id)},t)}))})})]})}):""]})]}),(0,o.jsx)(E.Ix,{position:"top-right",autoClose:5e3,limit:1,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!1,theme:"light"})]})}},75589:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var s=n(29439),a=n(72791),r=n(72426),c=n.n(r),i=n(80184);var o=function(e){var t=e.date,n=c()(t).startOf(t,"day").fromNow();return(0,i.jsxs)("div",{className:"ml-1",children:["Sent: ",n]})},l=n.p+"static/media/profile.7a6a6c54279a54d1977c.png",d=n(39126),u=n(53532),m=n(64802);var x=function(e){var t=e.message,n=e.beneName,r=e.getstudname,c=e.beneinfo,x=e.file,p=e.studID,f=e.avatarURL,h=(e.isRole,e.receivedmessages,e.allbeneinfo),b=(0,a.useState)(!1),g=(0,s.Z)(b,2),v=g[0],w=g[1],j=(0,a.useState)(),N=(0,s.Z)(j,2),y=N[0],Z=N[1],S=(0,a.useState)("https://ouraqybsyczzrrlbvenz.supabase.co/storage/v1/object/public/MessageFileUpload/".concat(p,"_").concat(c.id,"/").concat(c.id,"/").concat(t.message)),k=(0,s.Z)(S,2),z=k[0],C=k[1],M=(0,a.useState)("https://ouraqybsyczzrrlbvenz.supabase.co/storage/v1/object/public/MessageFileUpload/".concat(p,"_").concat(c.id,"/").concat(p,"/").concat(t.message)),E=(0,s.Z)(M,2),_=E[0],L=E[1],F=(0,a.useState)(!1),A=(0,s.Z)(F,2),U=A[0],I=A[1];function D(e){try{for(var n=0;n<x.length;n++)x[n].name===t.message&&("BENE"===c.ROLE?"Current"===e?q():R():"Current"===e?B():P())}catch(s){}}function q(){try{(0,m.saveAs)("https://ouraqybsyczzrrlbvenz.supabase.co/storage/v1/object/public/MessageFileUpload/".concat(p,"_").concat(c.id,"/").concat(c.id,"/").concat(t.message),t.message)}catch(e){}}function R(){try{(0,m.saveAs)("https://ouraqybsyczzrrlbvenz.supabase.co/storage/v1/object/public/MessageFileUpload/".concat(p,"_").concat(c.id,"/").concat(p,"/").concat(t.message),t.message)}catch(e){}}function B(){try{(0,m.saveAs)("https://ouraqybsyczzrrlbvenz.supabase.co/storage/v1/object/public/MessageFileUpload/".concat(c.id,"_").concat(p,"/").concat(c.id,"/").concat(t.message),t.message)}catch(e){}}function P(){try{(0,m.saveAs)("https://ouraqybsyczzrrlbvenz.supabase.co/storage/v1/object/public/MessageFileUpload/".concat(c.id,"_").concat(p,"/").concat(p,"/").concat(t.message),t.message)}catch(e){}}function T(){Z(t.message)}(0,a.useEffect)((function(){t.name===n&&t.contactwith===r&&!0===t.readmessage&&w(!0);for(var e=0;e<h.length;e++)r===h[e].beneName&&L("https://ouraqybsyczzrrlbvenz.supabase.co/storage/v1/object/public/MessageFileUpload/".concat(c.id,"_").concat(p,"/").concat(p,"/").concat(t.message))}),[t]),(0,a.useEffect)((function(){"BENE"!==c.ROLE&&(C("https://ouraqybsyczzrrlbvenz.supabase.co/storage/v1/object/public/MessageFileUpload/".concat(c.id,"_").concat(p,"/").concat(c.id,"/").concat(t.message)),L("https://ouraqybsyczzrrlbvenz.supabase.co/storage/v1/object/public/MessageFileUpload/".concat(c.id,"_").concat(p,"/").concat(p,"/").concat(t.message)))}),[c]);var O=function(){try{var e=t.message.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","bmp"].includes(e)?(0,i.jsx)("div",{className:"flex flex-col justify-center max-w-[300px] max-h-[300px] bg-white p-2 ml-2 rounded-md",children:(0,i.jsx)("div",{className:"text-right break-words ",children:(0,i.jsx)("div",{className:"text-right grid ",children:t.name===r&&t.contactwith===n?(0,i.jsx)("div",{className:"flex gap-2 items-center",children:y?(0,i.jsxs)("div",{className:"cursor-default",children:[" ",y]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{onClick:function(){return I(!U)},className:"max-w-[240px] max-h-[250px] min-h-[150px] min-w-[180px]",onError:T,src:_}),(0,i.jsx)(u.Z,{name:t.message,imgsrc:_,visible:U,onClose:I})]})}):(0,i.jsx)("div",{className:"flex gap-2 items-center",children:y?(0,i.jsx)("div",{className:"cursor-default",children:y}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{onClick:function(){return I(!U)},className:"max-w-[240px] max-h-[250px] min-h-[150px] min-w-[180px]",onError:T,src:z||_}),(0,i.jsx)(u.Z,{name:t.message,imgsrc:z,visible:U,onClose:I})]})})})})}):["docx","pdf","ods","pptx","xlsx"].includes(e)?(0,i.jsx)("div",{className:"flex flex-col justify-center max-w-[300px] h-auto bg-blue-900 text-white font-semibold  p-3 ml-2 rounded-md ",children:(0,i.jsxs)("div",{className:"text-right break-words  flex items-center gap-2 ",children:[(0,i.jsx)(d.VLk,{className:"text-[20px] "}),t.name===r&&t.contactwith===n?(0,i.jsx)("div",{onClick:function(){return D("User")},className:"text-left  w-[100%] hover:underline cursor-pointer",children:t.message}):(0,i.jsx)("div",{onClick:function(){return D("Current")},className:"text-right w-[100%] hover:underline cursor-pointer",children:t.message})]})}):(0,i.jsx)("div",{className:"flex flex-col justify-center max-w-[300px] h-auto bg-white p-2 ml-2 rounded-md cursor-default",children:(0,i.jsx)("div",{className:"text-right break-words cursor-default ",children:(0,i.jsx)("div",{onClick:function(){return D("Current")},className:"text-right cursor-default",children:t.message})})})}catch(s){}};return(0,i.jsx)(i.Fragment,{children:t&&(0,i.jsxs)("div",{children:[t.name===r&&t.contactwith===n&&(0,i.jsx)("div",{className:" mb-2 flex place-content-start ",children:(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsxs)("div",{className:" h-auto  flex",children:[f?(0,i.jsx)("img",{src:f,className:"  h-[40px] justify-center rounded-full"}):(0,i.jsx)("img",{src:l,className:"  h-[40px] justify-center rounded-full"}),O()]}),(0,i.jsxs)("div",{className:"text-right text-[9px] flex pt-1 ml-10 cursor-default",children:[(0,i.jsx)(o,{date:t.created_at}),v&&(0,i.jsx)(d.fC0,{className:"text-[15px] ml-1 text-green-600"})]})]})}),t&&(0,i.jsx)("div",{children:t.name===n&&t.contactwith===r&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:" mb-2 flex place-content-end",children:(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("div",{className:" flex place-content-end",children:O()}),(0,i.jsxs)("div",{className:"place-content-end text-[9px] flex pt-1  cursor-default",children:[(0,i.jsx)(o,{date:t.created_at}),v&&(0,i.jsx)(d.fC0,{className:"text-[15px] ml-1 text-green-600"})]})]})})})}),!t&&"Something's wrong with the connection"]})})}},53532:function(e,t,n){"use strict";var s=n(72791),a=n(58617),r=n(78820),c=n(64802),i=n(80184);t.Z=function(e){var t=e.imgsrc,n=e.visible,o=e.onClose,l=e.name,d=(0,s.useRef)(null),u=function(e){d.current&&!d.current.contains(e.target)&&o(!1)};return(0,s.useEffect)((function(){return document.addEventListener("mousedown",u),function(){document.removeEventListener("mousedown",u)}}),[]),n?(0,i.jsxs)("div",{className:"fixed inset-0  bg-black bg-opacity-30 backdrop-blur-lg flex-col justify-center  items-center z-50",children:[(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsx)(r.oHP,{className:" mt-[10px] text-white text-[35px] font-semibold"})}),(0,i.jsxs)("div",{ref:d,className:"text-end m-20 place-content-center flex flex-col items-center",children:[(0,i.jsx)("img",{src:t,className:"max-h-[35%]  max-w-[35%] min-h-[100px]  min-w-[100px]"}),(0,i.jsxs)("a",{onClick:function(){return(0,c.saveAs)(t,l)},download:"computer",className:"text-white font-semibold flex items-center hover:text-blue-500 cursor-pointer",children:[(0,i.jsx)(a.H_7,{className:"text-[20px] "})," Download"]})," "]})]}):null}},24654:function(){}}]);
//# sourceMappingURL=196.8b411ff0.chunk.js.map