{"version":3,"file":"static/js/436.c0ce5ef0.chunk.js","mappings":"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","sources":["components/Announcement/ActivityLog.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport supabase from \"../iMonitorDBconfig\";\nimport ReactPaginate from \"react-paginate\";\nimport { TailSpin } from \"react-loader-spinner\";\nfunction ActivityLog() {\n  const [ActivityLog, setActivityLog] = useState([]);\n  const [count, setCount] = useState();\n  const [filter, setFilter] = useState(\"\");\n\n  const [pageNumber, setPageNumber] = useState(0);\n  const userPerPage = 50;\n  let pageVisited = pageNumber * userPerPage;\n  let pageCount = Math.ceil(count / userPerPage);\n  const changePage = ({ selected }) => {\n    setPageNumber(selected);\n  };\n\n  useEffect(() => {\n    fetchactivitylog();\n    supabase\n      .channel(\"table-db-changes\")\n      .on(\n        \"postgres_changes\",\n        {\n          event: \"*\",\n          schema: \"public\",\n          table: \"ActivityLog\",\n        },\n        (payload) => {\n          fetchactivitylog();\n        }\n      )\n      .subscribe();\n  }, [filter]);\n\n  const fetchactivitylog = async () => {\n    const { data, count } = await supabase\n      .from(\"ActivityLog\")\n      .select(\"*\", { count: \"exact\" });\n\n    setActivityLog(data);\n    setCount(count);\n  };\n\n  const removeUUIDtitle = (title) => {\n    var text = title.split(\".\")[1];\n\n    const containsPeriod = title.includes(\".\");\n    if (!containsPeriod) {\n      return title;\n    } else {\n      return text;\n    }\n  };\n\n  return (\n    <div className=\"bg-black bg-opacity-20 md:pt-[1%] pt-[7%]  h-screen md:text-base text-[14px] p-5\">\n      <p className=\"font-bold text-[30px] font-sans mb-4 mt-4 text-white\">\n        ACTIVITY LOG\n      </p>\n      <div className=\" h-[75%] w-[100%]  overflow-hidden  grid   shadow-lg shadow-black\">\n        <div className=\"bg-slate-300 bg-opacity-60 w-[99.9%] rounded-md  overflow-y-hidden h-[100%] p-5\">\n          <div className=\"grid grid-cols-3 mb-3  w-fill bg-slate-300 p-2 rounded-md text-[#4D7C9A]\">\n            <p className=\"font-bold \">NAME</p>\n            <p className=\"font-bold \">ACTIVITY</p>\n            <p className=\"font-bold \">TIME</p>\n          </div>\n          {/* test */}\n          {ActivityLog ? (\n            <>\n              {ActivityLog.length <= 0 && (\n                <div className=\"flex items-center justify-center place-content-center h-[100%] text-[30px] font-bold text-white\">\n                  No Data\n                </div>\n              )}\n              <div className=\"overflow-y-auto overflow-hidden w-[100%] md:h-[80%] h-[76%] \">\n                {ActivityLog.sort((a, b) =>\n                  a.created_at < b.created_at ? 1 : -1\n                )\n                  .filter((val) => {\n                    try {\n                      if (filter === \"\") {\n                        return val;\n                      } else if (\n                        val.name.toLowerCase().includes(filter.toLowerCase())\n                      ) {\n                        return val;\n                      }\n                    } catch (error) {}\n                  })\n                  .slice(filter ? \"\" : pageVisited, pageVisited + userPerPage)\n                  .map((log) => (\n                    <div\n                      key={log.id}\n                      className=\"  grid grid-cols-3 mb-3 w-[100%] bg-slate-200 p-2 rounded-md hover:translate-x-4 hover:shadow-md hover:shadow-black duration-100 hover:p-4\"\n                    >\n                      <p className=\"font-semibold font-sans cursor-default\">\n                        {log.name}\n                      </p>\n                      <p className=\"font-semibold font-sans cursor-default\">\n                        {removeUUIDtitle(log.button)}\n                      </p>\n                      <p className=\"font-semibold font-sans cursor-default\">\n                        {log.time}\n                      </p>\n                    </div>\n                  ))}\n              </div>\n              <div className=\"mt-[1%] w-[100%] justify-between flex\">\n                <div className=\"flex justify-center items-center  gap-2 \">\n                  <label className=\"md:flex hidden \">Filter By Name</label>\n                  <input\n                    onChange={(e) => setFilter(e.target.value)}\n                    type=\"text\"\n                    className=\"rounded-md p-1\"\n                    placeholder=\"Type Name\"\n                  ></input>\n                </div>\n                <ReactPaginate\n                  previousLabel={\"Previous\"}\n                  nextLabel={\"Next\"}\n                  pageCount={pageCount}\n                  onPageChange={changePage}\n                  containerClassName=\"flex gap-2 justify-center flex items-center text-white cursor-default\"\n                  previousLinkClassName=\"bg-[#274472] p-1 rounded-md flex items-center\"\n                  nextLinkClassName=\"bg-[#274472] p-1 rounded-md flex items-center\"\n                  disabledLinkClassName=\" bg-[#274472] p-1 rounded-md\"\n                  activeLinkClassName=\" bg-[#274472] p-1 rounded-md\"\n                />\n              </div>\n            </>\n          ) : (\n            <div className=\"flex h-[100%] items-center place-content-center\">\n              <TailSpin\n                height=\"80\"\n                width=\"80\"\n                color=\"#0074B7\"\n                ariaLabel=\"tail-spin-loading\"\n                radius=\"0\"\n                wrapperStyle={{}}\n                wrapperClass=\"\"\n                visible={true}\n              />\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ActivityLog;\n"],"names":["_useState","useState","_useState2","_slicedToArray","ActivityLog","setActivityLog","_useState3","_useState4","count","setCount","_useState5","_useState6","filter","setFilter","_useState7","_useState8","pageNumber","setPageNumber","pageVisited","pageCount","Math","ceil","useEffect","fetchactivitylog","supabase","channel","on","event","schema","table","payload","subscribe","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$supabase$from$","data","wrap","_context","prev","next","from","select","sent","stop","apply","arguments","removeUUIDtitle","title","text","split","includes","_jsxs","className","children","_jsx","_Fragment","length","sort","a","b","created_at","val","name","toLowerCase","error","slice","map","log","button","time","id","onChange","e","target","value","type","placeholder","ReactPaginate","previousLabel","nextLabel","onPageChange","_ref","selected","containerClassName","previousLinkClassName","nextLinkClassName","disabledLinkClassName","activeLinkClassName","TailSpin","height","width","color","ariaLabel","radius","wrapperStyle","wrapperClass","visible"],"sourceRoot":""}